<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å®æˆ˜ç¤ºä¾‹ - LangChain4j å­¦ä¹ æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white text-gray-800 antialiased">
    <div class="flex min-h-screen">
        <aside class="w-[280px] fixed left-0 top-0 h-full bg-white border-r border-gray-200 overflow-y-auto z-50">
            <a href="index.html" class="flex items-center gap-3 mb-8 text-gray-900 no-underline">
                <div class="w-9 h-9 bg-indigo-600 rounded-lg flex items-center justify-center text-white text-xl">âš¡</div>
                <span class="font-bold text-xl">LangChain4j</span>
            </a>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">å…¥é—¨</div>
                <ul class="list-none">
                    <li><a href="index.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é¦–é¡µ</a></li>
                    <li><a href="getting-started.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">å¿«é€Ÿå…¥é—¨</a></li>
                    <li><a href="core-concepts.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ ¸å¿ƒæ¦‚å¿µ</a></li>
                </ul>
            </div>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">åŸºç¡€</div>
                <ul class="list-none">
                    <li><a href="embedding-models.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">Embeddingæ¨¡å‹</a></li>
                    <li><a href="prompt-templates.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">Promptæ¨¡æ¿</a></li>
                    <li><a href="output-parsers.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">è¾“å‡ºè§£æ</a></li>
                    <li><a href="model-providers.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ¨¡å‹æä¾›å•†</a></li>
                </ul>
            </div>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">è¿›é˜¶</div>
                <ul class="list-none">
                    <li><a href="function-calling-deep.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">Function Calling</a></li>
                    <li><a href="advanced-features.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é«˜çº§ç‰¹æ€§</a></li>
                    <li><a href="multimodal-full.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">å¤šæ¨¡æ€èƒ½åŠ›</a></li>
                    <li><a href="rag-complete.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">RAGå®Œæ•´æŒ‡å—</a></li>
                    <li><a href="project-rag-kb.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">RAGçŸ¥è¯†åº“é¡¹ç›®</a></li>
                    <li><a href="project-ai-assistant.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">AIåŠ©æ‰‹é¡¹ç›®</a></li>
                    <li><a href="project-chatbot.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">èŠå¤©æœºå™¨äººé¡¹ç›®</a></li>
                </ul>
            </div>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">å®è·µ</div>
                <ul class="list-none">
                    <li><a href="best-practices.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æœ€ä½³å®è·µ</a></li>
                    <li><a href="examples.html" class="bg-primary-50 text-indigo-700 block py-2 px-3 text-sm rounded-md font-medium">å®æˆ˜ç¤ºä¾‹</a></li>
                    <li><a href="integrations.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ¡†æ¶é›†æˆ</a></li>
                    <li><a href="testing-strategies.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æµ‹è¯•ç­–ç•¥</a></li>
                    <li><a href="performance-tuning.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ€§èƒ½è°ƒä¼˜</a></li>
                </ul>
            </div>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">å…¶ä»–</div>
                <ul class="list-none">
                    <li><a href="deep-dive.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ·±åº¦è§£æ</a></li>
                    <li><a href="error-handling.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é”™è¯¯å¤„ç†</a></li>
                    <li><a href="moderation-safety.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">å†…å®¹å®¡æ ¸</a></li>
                    <li><a href="troubleshooting.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é—®é¢˜æ’æŸ¥</a></li>
                    <li><a href="interview-prep.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é¢è¯•å‡†å¤‡</a></li>
                    <li><a href="practice.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">ç»ƒä¹ é¡¹ç›®</a></li>
                </ul>
            </div>
        </aside>

        <main class="flex-1 ml-[280px] px-8 py-12 max-w-7xl">
            <div class="mb-8 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <span class="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-semibold">2025-02-14</span>
                    <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-semibold">å®æˆ˜ä»£ç </span>
                    <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-semibold">ä¸­çº§éš¾åº¦</span>
                </div>
            </div>

            <h1 class="text-5xl font-bold text-gray-900 mb-6">LangChain4j å®æˆ˜ç¤ºä¾‹</h1>

            <div class="mb-8">
                <h2 class="text-lg font-semibold text-gray-900 mb-4">ğŸ“‹ ç¤ºä¾‹æ¦‚è§ˆ</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 border border-indigo-100 rounded-xl p-6">
                        <div class="text-3xl mb-3">ğŸ’¬</div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">ç®€å•èŠå¤©</h3>
                        <ul class="text-gray-600 text-sm space-y-1">
                            <li>â€¢ åŸºç¡€å¯¹è¯æœºå™¨äºº</li>
                            <li>â€¢ æµå¼è¾“å‡º</li>
                            <li>â€¢ ä¸Šä¸‹æ–‡ç®¡ç†</li>
                        </ul>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-100 rounded-xl p-6">
                        <div class="text-3xl mb-3">ğŸ”</div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">æ™ºèƒ½é—®ç­”</h3>
                        <ul class="text-gray-600 text-sm space-y-1">
                            <li>â€¢ RAGæ£€ç´¢</li>
                            <li>â€¢ å‘é‡æœç´¢</li>
                            <li>â€¢ çŸ¥è¯†åº“ç®¡ç†</li>
                        </ul>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-teal-50 border border-green-100 rounded-xl p-6">
                        <div class="text-3xl mb-3">ğŸ¤–</div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">AI Agent</h3>
                        <ul class="text-gray-600 text-sm space-y-1">
                            <li>â€¢ å·¥å…·è°ƒç”¨</li>
                            <li>â€¢ è‡ªåŠ¨æ¨ç†</li>
                            <li>â€¢ ä»»åŠ¡è§„åˆ’</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mb-12 bg-blue-50 border border-blue-100 rounded-lg p-6">
                <div class="flex items-start gap-3">
                    <span class="text-2xl">ğŸ’¡</span>
                    <div>
                        <h3 class="font-bold text-gray-900 mb-2">å­¦ä¹ ç›®æ ‡</h3>
                        <ul class="text-gray-700 space-y-2 text-sm">
                            <li>â€¢ é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹ç†è§£ LangChain4j çš„æ ¸å¿ƒåŠŸèƒ½</li>
                            <li>â€¢ å­¦ä¹ å¸¸è§åº”ç”¨åœºæ™¯çš„å®ç°æ–¹å¼</li>
                            <li>â€¢ æŒæ¡æœ€ä½³å®è·µå’Œä»£ç ç»„ç»‡ç»“æ„</li>
                            <li>â€¢ äº†è§£ä¸åŒåœºæ™¯ä¸‹çš„æŠ€æœ¯é€‰å‹</li>
                        </ul>
                    </div>
                </div>
            </div>

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl font-bold">1</span>
                    ç®€å•èŠå¤©æœºå™¨äºº
                </h2>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">1.1 åŸºç¡€å¯¹è¯ç¤ºä¾‹</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">SimpleChatBot.java</div>
                        <div class="text-xs text-gray-400">åŸºç¡€èŠå¤©æœºå™¨äºº</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.chat;

import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;

/**
 * ç®€å•èŠå¤©æœºå™¨äººç¤ºä¾‹
 * æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨LangChain4jåˆ›å»ºåŸºç¡€çš„AIå¯¹è¯ç³»ç»Ÿ
 */
public class SimpleChatBot {

    /**
     * èŠå¤©AIæ¥å£
     * ä½¿ç”¨æ³¨è§£å®šä¹‰AIè¡Œä¸º
     */
    interface ChatAi {
        /**
         * ç³»ç»Ÿæ¶ˆæ¯ï¼šå®šä¹‰AIçš„è§’è‰²å’Œè¡Œä¸º
         */
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„AIåŠ©æ‰‹ï¼Œæ“…é•¿ç”¨ç®€æ´æ˜äº†çš„æ–¹å¼å›ç­”é—®é¢˜ã€‚
            ä½ çš„å›ç­”åº”è¯¥ï¼š
            - å‡†ç¡®ä¸”æœ‰ç”¨
            - é€‚å½“ä½¿ç”¨emojiå¢åŠ äº²å’ŒåŠ›
            - å¦‚æœä¸ç¡®å®šï¼Œè¯šå®åœ°è¯´"æˆ‘ä¸ç¡®å®š"
            - é¿å…è¿‡åº¦ä¸“ä¸šæœ¯è¯­
            """)
        String chat(@UserMessage String userMessage);
    }

    public static void main(String[] args) {
        // 1. åˆ›å»ºèŠå¤©æ¨¡å‹
        ChatLanguageModel model = OpenAiChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))  // ä»ç¯å¢ƒå˜é‡è·å–APIå¯†é’¥
            .modelName("gpt-4")                         // ä½¿ç”¨GPT-4æ¨¡å‹
            .temperature(0.7)                         // è®¾ç½®æ¸©åº¦ï¼ˆåˆ›é€ æ€§ï¼‰
            .maxTokens(1000)                          // æœ€å¤§è¾“å‡ºTokenæ•°
            .build();

        // 2. åˆ›å»ºAIæœåŠ¡
        ChatAi chatAi = AiServices.builder(ChatAi.class)
            .chatLanguageModel(model)
            .build();

        // 3. è¿›è¡Œå¯¹è¯
        String userMessage = "ä»€ä¹ˆæ˜¯LangChain4jï¼Ÿ";
        System.out.println("ç”¨æˆ·: " + userMessage);

        String response = chatAi.chat(userMessage);
        System.out.println("AI: " + response);

        // ç»§ç»­å¯¹è¯
        userMessage = "å®ƒæ”¯æŒå“ªäº›åŠŸèƒ½ï¼Ÿ";
        System.out.println("\nç”¨æˆ·: " + userMessage);
        response = chatAi.chat(userMessage);
        System.out.println("AI: " + response);
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼š
 *
 * ç”¨æˆ·: ä»€ä¹ˆæ˜¯LangChain4jï¼Ÿ
 * AI: LangChain4jæ˜¯ä¸€ä¸ªJavaåº“ï¼Œå¸®åŠ©å¼€å‘è€…è½»æ¾æ„å»ºLLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰åº”ç”¨ ğŸš€
 *     å®ƒæä¾›äº†ç®€å•ç›´è§‚çš„APIï¼Œè®©ä½ å¯ä»¥å¿«é€Ÿé›†æˆå„ç§AIæ¨¡å‹å’ŒåŠŸèƒ½ã€‚
 *
 * ç”¨æˆ·: å®ƒæ”¯æŒå“ªäº›åŠŸèƒ½ï¼Ÿ
 * AI: LangChain4jæ”¯æŒå¾ˆå¤šå¼ºå¤§çš„åŠŸèƒ½ï¼âœ¨ ä¸»è¦åŒ…æ‹¬ï¼š
 *     â€¢ èŠå¤©å¯¹è¯ï¼ˆChatï¼‰- ä¸AIè¿›è¡Œè‡ªç„¶å¯¹è¯
 *     â€¢ Function Calling - è®©AIè°ƒç”¨å¤–éƒ¨å·¥å…·
 *     â€¢ RAGï¼ˆæ£€ç´¢å¢å¼ºï¼‰- ç»“åˆçŸ¥è¯†åº“å›ç­”é—®é¢˜
 *     â€¢ Embedding - æ–‡æœ¬å‘é‡åŒ–
 *     â€¢ å¤šæ¨¡æ€ - å¤„ç†å›¾åƒã€éŸ³é¢‘ç­‰
 *     â€¢ è®°å¿†ç®¡ç† - ä¿å­˜å¯¹è¯å†å²
 */
                    </code></pre>
                </div>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">1.2 æµå¼è¾“å‡ºç¤ºä¾‹</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">StreamingChatBot.java</div>
                        <div class="text-xs text-gray-400">æµå¼è¾“å‡ºèŠå¤©æœºå™¨äºº</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.chat;

import dev.langchain4j.model.chat.StreamingChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiStreamingChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;
import dev.langchain4j.service.streaming.StreamingAiService;

import java.util.stream.Stream;

/**
 * æµå¼è¾“å‡ºèŠå¤©æœºå™¨äººç¤ºä¾‹
 * æ¼”ç¤ºå¦‚ä½•å®æ—¶è·å–AIç”Ÿæˆçš„æ–‡æœ¬
 */
public class StreamingChatBot {

    /**
     * æµå¼èŠå¤©AIæ¥å£
     */
    interface StreamingChatAi {
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªå–„äºè®²æ•…äº‹çš„AIã€‚
            è¯·ç”¨ç”ŸåŠ¨æœ‰è¶£çš„æ–¹å¼è®²è¿°ç”¨æˆ·è¯·æ±‚çš„æ•…äº‹ã€‚
            """)
        Stream&lt;String&gt; chatStream(@UserMessage String userMessage);
    }

    public static void main(String[] args) {
        // 1. åˆ›å»ºæµå¼èŠå¤©æ¨¡å‹
        StreamingChatLanguageModel model = OpenAiStreamingChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("gpt-4")
            .temperature(0.8)  // ç¨é«˜çš„æ¸©åº¦è®©æ•…äº‹æ›´æœ‰åˆ›æ„
            .build();

        // 2. åˆ›å»ºæµå¼AIæœåŠ¡
        StreamingChatAi streamingAi = AiServices.builder(StreamingChatAi.class)
            .streamingChatLanguageModel(model)
            .build();

        // 3. æµå¼å¯¹è¯
        String userMessage = "è®²ä¸€ä¸ªå…³äºç¼–ç¨‹çš„å°æ•…äº‹";
        System.out.println("ç”¨æˆ·: " + userMessage);
        System.out.println("\nAI: ");

        try (Stream&lt;String&gt; responseStream = streamingAi.chatStream(userMessage)) {
            // å®æ—¶æ‰“å°æ¯ä¸ªtoken
            responseStream.forEach(token -&gt; {
                System.out.print(token);
                System.out.flush();  // ç«‹å³åˆ·æ–°ç¼“å†²åŒº
            });
        }
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼ˆå®æ—¶è¾“å‡ºï¼‰ï¼š
 *
 * ç”¨æˆ·: è®²ä¸€ä¸ªå…³äºç¼–ç¨‹çš„å°æ•…äº‹
 *
 * AI: ä»å‰ï¼Œæœ‰ä¸€ä¸ªåå«å°æ˜çš„ç¨‹åºå‘˜ ğŸ§‘â€ğŸ’»
 * 
 * ä»–æ¯å¤©éƒ½åœ¨å’Œä»£ç ææ–—...
 * 
 * æœ‰ä¸€å¤©ï¼Œé‡åˆ°äº†ä¸€ä¸ªé¡½å›ºçš„bug ğŸ›
 * 
 * ç»è¿‡ä¸‰å¤©ä¸‰å¤œçš„åŠªåŠ›...
 * 
 * ç»ˆäºæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ï¼âœ¨
 * 
 * åŸæ¥æ˜¯ä¸€ä¸ªå¤šä½™çš„åˆ†å·...
 * 
 * ä»æ­¤ï¼Œå°æ˜å…»æˆäº†å†™æ³¨é‡Šçš„å¥½ä¹ æƒ¯ ğŸ“
 */
                    </code></pre>
                </div>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">1.3 å¸¦è®°å¿†çš„èŠå¤©æœºå™¨äºº</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">ChatWithMemory.java</div>
                        <div class="text-xs text-gray-400">å¸¦å¯¹è¯è®°å¿†çš„æœºå™¨äºº</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.chat;

import dev.langchain4j.data.message.AiMessage;
import dev.langchain4j.data.message.ChatMessage;
import dev.langchain4j.data.message.UserMessage;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;
import dev.langchain4j.service.spring.AiService;

import java.util.ArrayList;
import java.util.List;

/**
 * å¸¦è®°å¿†çš„èŠå¤©æœºå™¨äººç¤ºä¾‹
 * æ¼”ç¤ºå¦‚ä½•ä¿å­˜å’Œæ£€ç´¢å¯¹è¯å†å²
 */
public class ChatWithMemory {

    /**
     * èŠå¤©AIæ¥å£
     */
    interface ChatAi {
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªå–„äºè®°äº‹çš„AIåŠ©æ‰‹ã€‚
            ä½ ä¼šè®°ä½ä¹‹å‰çš„å¯¹è¯å†…å®¹ï¼Œå¹¶ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ã€‚
            """)
        String chat(@UserMessage String userMessage, String conversationHistory);
    }

    public static void main(String[] args) {
        ChatLanguageModel model = OpenAiChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("gpt-4")
            .build();

        ChatAi chatAi = AiServices.builder(ChatAi.class)
            .chatLanguageModel(model)
            .build();

        // æ¨¡æ‹Ÿä¸€ä¸ªä¼šè¯çš„å¯¹è¯å†å²
        List&lt;ChatMessage&gt; history = new ArrayList&lt;&gt;();

        // ç¬¬ä¸€è½®å¯¹è¯
        String message1 = "æˆ‘çš„åå­—å«å¼ ä¸‰";
        System.out.println("ç”¨æˆ·: " + message1);
        String response1 = chatAi.chat(message1, buildHistoryPrompt(history));
        System.out.println("AI: " + response1);
        
        // ä¿å­˜åˆ°å†å²
        history.add(new UserMessage(message1));
        history.add(new AiMessage(response1));

        // ç¬¬äºŒè½®å¯¹è¯
        String message2 = "æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ";
        System.out.println("\nç”¨æˆ·: " + message2);
        String response2 = chatAi.chat(message2, buildHistoryPrompt(history));
        System.out.println("AI: " + response2);

        history.add(new UserMessage(message2));
        history.add(new AiMessage(response2));

        // ç¬¬ä¸‰è½®å¯¹è¯
        String message3 = "æˆ‘åˆšæ‰é—®äº†ä»€ä¹ˆï¼Ÿ";
        System.out.println("\nç”¨æˆ·: " + message3);
        String response3 = chatAi.chat(message3, buildHistoryPrompt(history));
        System.out.println("AI: " + response3);
    }

    /**
     * å°†å†å²æ¶ˆæ¯è½¬æ¢ä¸ºæç¤ºè¯
     */
    private static String buildHistoryPrompt(List&lt;ChatMessage&gt; history) {
        if (history.isEmpty()) {
            return "è¿™æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡å¯¹è¯ã€‚";
        }

        StringBuilder sb = new StringBuilder();
        sb.append("ä¹‹å‰çš„å¯¹è¯å†å²ï¼š\n\n");
        
        for (ChatMessage msg : history) {
            if (msg instanceof UserMessage) {
                sb.append("ç”¨æˆ·: ").append(((UserMessage) msg).singleText()).append("\n");
            } else if (msg instanceof AiMessage) {
                sb.append("AI: ").append(((AiMessage) msg).text()).append("\n");
            }
        }
        
        sb.append("\nåŸºäºä»¥ä¸Šå†å²ï¼Œå›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼š");
        return sb.toString();
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼š
 *
 * ç”¨æˆ·: æˆ‘çš„åå­—å«å¼ ä¸‰
 * AI: ä½ å¥½å¼ ä¸‰ï¼å¾ˆé«˜å…´è®¤è¯†ä½  ğŸ˜Š æˆ‘ä¼šè®°ä½ä½ çš„åå­—çš„ã€‚
 *
 * ç”¨æˆ·: æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ
 * AI: ä½ çš„åå­—å«å¼ ä¸‰ ğŸ‘
 *
 * ç”¨æˆ·: æˆ‘åˆšæ‰é—®äº†ä»€ä¹ˆï¼Ÿ
 * AI: ä½ åˆšæ‰é—®äº†"æˆ‘å«ä»€ä¹ˆåå­—"ï¼Œå¹¶ä¸”æˆ‘æ­£ç¡®åœ°å›ç­”äº†ä½ æ˜¯å¼ ä¸‰ ğŸ˜„
 */
                    </code></pre>
                </div>
            </section>

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl font-bold">2</span>
                    æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼ˆRAGï¼‰
                </h2>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">2.1 ç®€å•RAGç¤ºä¾‹</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">SimpleRag.java</div>
                        <div class="text-xs text-gray-400">RAGæ™ºèƒ½é—®ç­”</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.rag;

import dev.langchain4j.data.document.Document;
import dev.langchain4j.data.document.DocumentSplitter;
import dev.langchain4j.data.document.splitter.DocumentByParagraphSplitter;
import dev.langchain4j.data.embedding.EmbeddingModel;
import dev.langchain4j.data.segment.TextSegment;
import dev.langchain4j.model.embedding.EmbeddingModel;
import dev.langchain4j.model.openai.OpenAiEmbeddingModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.store.embedding.EmbeddingStore;
import dev.langchain4j.store.embedding.EmbeddingStoreIngestor;
import dev.langchain4j.store.embedding.inmemory.InMemoryEmbeddingStore;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;

import java.util.List;

/**
 * ç®€å•RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç¤ºä¾‹
 * æ¼”ç¤ºå¦‚ä½•åŸºäºçŸ¥è¯†åº“å›ç­”é—®é¢˜
 */
public class SimpleRag {

    /**
     * RAG AIæ¥å£
     */
    interface RagAi {
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½é—®ç­”åŠ©æ‰‹ã€‚
            è¯·åŸºäºæä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚
            å¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯šå®åœ°è¯´"æˆ‘ä¸çŸ¥é“"ã€‚
            ä¸è¦ç¼–é€ ç­”æ¡ˆã€‚
            """)
        String answer(@UserMessage String userMessage, String retrievedContext);
    }

    public static void main(String[] args) {
        // 1. å‡†å¤‡çŸ¥è¯†åº“æ–‡æ¡£
        String knowledgeText = """
            LangChain4jæ˜¯ä¸€ä¸ªJavaåº“ï¼Œç”¨äºæ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨ã€‚
            
            ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
            1. èŠå¤©å¯¹è¯ - ä¸AIæ¨¡å‹è¿›è¡Œè‡ªç„¶è¯­è¨€äº¤äº’
            2. Function Calling - è®©AIè°ƒç”¨å¤–éƒ¨å·¥å…·å’ŒAPI
            3. RAGï¼ˆæ£€ç´¢å¢å¼ºï¼‰- ç»“åˆå‘é‡æœç´¢å’ŒçŸ¥è¯†åº“å›ç­”é—®é¢˜
            4. Embedding - å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º
            5. å¤šæ¨¡æ€æ”¯æŒ - å¤„ç†æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§è¾“å…¥
            
            LangChain4jçš„ä¼˜ç‚¹ï¼š
            - ç®€å•æ˜“ç”¨çš„APIè®¾è®¡
            - æ”¯æŒå¤šç§LLMæä¾›å•†ï¼ˆOpenAIã€HuggingFaceç­‰ï¼‰
            - è‰¯å¥½çš„ç±»å‹å®‰å…¨å’ŒJavaç”Ÿæ€é›†æˆ
            - æ´»è·ƒçš„ç¤¾åŒºå’Œä¸°å¯Œçš„æ–‡æ¡£
            """;

        // 2. åˆ›å»ºæ–‡æ¡£åˆ†å‰²å™¨
        DocumentSplitter splitter = new DocumentByParagraphSplitter(100, 10);
        Document document = Document.from(knowledgeText);
        List&lt;TextSegment&gt; segments = splitter.split(document);

        // 3. åˆ›å»ºEmbeddingæ¨¡å‹
        EmbeddingModel embeddingModel = OpenAiEmbeddingModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("text-embedding-3-small")
            .build();

        // 4. åˆ›å»ºå‘é‡å­˜å‚¨ï¼ˆå†…å­˜å­˜å‚¨ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ•°æ®åº“ï¼‰
        EmbeddingStore&lt;TextSegment&gt; embeddingStore = new InMemoryEmbeddingStore&lt;&gt;();

        // 5. å°†æ–‡æ¡£å‘é‡åŒ–å¹¶å­˜å…¥å‘é‡åº“
        EmbeddingStoreIngestor.ingest(embeddingStore, segments);

        System.out.println("çŸ¥è¯†åº“å‡†å¤‡å®Œæˆï¼å…±" + segments.size() + "ä¸ªç‰‡æ®µ\n");

        // 6. åˆ›å»ºRAGæœåŠ¡
        var ragService = new RagService(embeddingModel, embeddingStore);

        // 7. åˆ›å»ºèŠå¤©æ¨¡å‹
        var chatModel = OpenAiChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("gpt-4")
            .build();

        // 8. åˆ›å»ºAIæœåŠ¡
        RagAi ragAi = AiServices.builder(RagAi.class)
            .chatLanguageModel(chatModel)
            .build();

        // 9. è¿›è¡Œé—®ç­”
        String[] questions = {
            "LangChain4jæœ‰å“ªäº›ä¸»è¦åŠŸèƒ½ï¼Ÿ",
            "LangChain4jçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ",
            "LangChain4jæ”¯æŒPythonå—ï¼Ÿ"  // çŸ¥è¯†åº“ä¸­æ²¡æœ‰çš„ä¿¡æ¯
        };

        for (String question : questions) {
            System.out.println("é—®é¢˜: " + question);
            
            // æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡
            String context = ragService.retrieveContext(question, 2);
            System.out.println("æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡: " + context.substring(0, Math.min(100, context.length())) + "...");
            
            // åŸºäºä¸Šä¸‹æ–‡å›ç­”
            String answer = ragAi.answer(question, context);
            System.out.println("å›ç­”: " + answer);
            System.out.println();
        }
    }

    /**
     * RAGæœåŠ¡ç±»
     */
    static class RagService {
        private final EmbeddingModel embeddingModel;
        private final EmbeddingStore&lt;TextSegment&gt; embeddingStore;

        public RagService(EmbeddingModel embeddingModel, EmbeddingStore&lt;TextSegment&gt; embeddingStore) {
            this.embeddingModel = embeddingModel;
            this.embeddingStore = embeddingStore;
        }

        /**
         * æ£€ç´¢ä¸é—®é¢˜æœ€ç›¸å…³çš„ä¸Šä¸‹æ–‡
         */
        public String retrieveContext(String query, int topK) {
            // 1. ç”ŸæˆæŸ¥è¯¢å‘é‡
            var queryEmbedding = embeddingModel.embed(query).content();

            // 2. åœ¨å‘é‡åº“ä¸­æœç´¢æœ€ç›¸å…³çš„ç‰‡æ®µ
            var relevantSegments = embeddingStore.findRelevant(queryEmbedding, topK, 0.7);

            // 3. ç»„åˆä¸ºä¸Šä¸‹æ–‡å­—ç¬¦ä¸²
            return relevantSegments.stream()
                .map(match -&gt; match.embedded().text())
                .reduce("", (a, b) -&gt; a + "\n\n" + b);
        }
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼š
 *
 * çŸ¥è¯†åº“å‡†å¤‡å®Œæˆï¼å…±8ä¸ªç‰‡æ®µ
 *
 * é—®é¢˜: LangChain4jæœ‰å“ªäº›ä¸»è¦åŠŸèƒ½ï¼Ÿ
 * æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡: LangChain4jæ˜¯ä¸€ä¸ªJavaåº“ï¼Œç”¨äºæ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨ã€‚
 * ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š1. èŠå¤©å¯¹è¯...
 * å›ç­”: LangChain4jçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š1. èŠå¤©å¯¹è¯ - ä¸AIæ¨¡å‹è¿›è¡Œè‡ªç„¶è¯­è¨€äº¤äº’
 *         2. Function Calling - è®©AIè°ƒç”¨å¤–éƒ¨å·¥å…·å’ŒAPI
 *         3. RAGï¼ˆæ£€ç´¢å¢å¼ºï¼‰- ç»“åˆå‘é‡æœç´¢å’ŒçŸ¥è¯†åº“å›ç­”é—®é¢˜
 *         4. Embedding - å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º
 *         5. å¤šæ¨¡æ€æ”¯æŒ - å¤„ç†æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§è¾“å…¥
 *
 * é—®é¢˜: LangChain4jçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ
 * æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡: LangChain4jçš„ä¼˜ç‚¹ï¼š- ç®€å•æ˜“ç”¨çš„APIè®¾è®¡...
 * å›ç­”: LangChain4jçš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š
 *         - ç®€å•æ˜“ç”¨çš„APIè®¾è®¡
 *         - æ”¯æŒå¤šç§LLMæä¾›å•†ï¼ˆOpenAIã€HuggingFaceç­‰ï¼‰
 *         - è‰¯å¥½çš„ç±»å‹å®‰å…¨å’ŒJavaç”Ÿæ€é›†æˆ
 *         - æ´»è·ƒçš„ç¤¾åŒºå’Œä¸°å¯Œçš„æ–‡æ¡£
 *
 * é—®é¢˜: LangChain4jæ”¯æŒPythonå—ï¼Ÿ
 * æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡: ï¼ˆæ— ç›¸å…³ç»“æœï¼‰
 * å›ç­”: æˆ‘ä¸çŸ¥é“ã€‚æ ¹æ®æä¾›çš„çŸ¥è¯†åº“ï¼Œæ²¡æœ‰æ‰¾åˆ°å…³äºLangChain4jæ˜¯å¦æ”¯æŒPythonçš„ä¿¡æ¯ã€‚
 */
                    </code></pre>
                </div>

                <div class="bg-green-50 border border-green-100 rounded-lg p-6 mb-8">
                    <h4 class="font-semibold text-gray-900 mb-3 flex items-center gap-2">
                        <span class="text-green-600">ğŸ’¡</span> RAGæ ¸å¿ƒæ­¥éª¤
                    </h4>
                    <ol class="text-gray-700 space-y-2 text-sm list-decimal list-inside">
                        <li><strong>å‡†å¤‡çŸ¥è¯†åº“</strong>ï¼šæ”¶é›†ç›¸å…³æ–‡æ¡£å’Œèµ„æ–™</li>
                        <li><strong>æ–‡æ¡£åˆ†å‰²</strong>ï¼šå°†é•¿æ–‡æ¡£åˆ‡åˆ†æˆå°å—</li>
                        <li><strong>å‘é‡åŒ–</strong>ï¼šä½¿ç”¨Embeddingæ¨¡å‹å°†æ–‡æœ¬è½¬ä¸ºå‘é‡</li>
                        <li><strong>å­˜å‚¨</strong>ï¼šå°†å‘é‡å­˜å…¥å‘é‡æ•°æ®åº“</li>
                        <li><strong>æ£€ç´¢</strong>ï¼šæ ¹æ®é—®é¢˜åœ¨å‘é‡åº“ä¸­æŸ¥æ‰¾ç›¸å…³å†…å®¹</li>
                        <li><strong>ç”Ÿæˆ</strong>ï¼šå°†æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡å’Œé—®é¢˜ä¸€èµ·å‘é€ç»™LLM</li>
                    </ol>
                </div>
            </section>

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl font-bold">3</span>
                    AI Agentï¼ˆæ™ºèƒ½ä»£ç†ï¼‰
                </h2>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">3.1 Function Callingç¤ºä¾‹</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">WeatherAgent.java</div>
                        <div class="text-xs text-gray-400">å¤©æ°”æŸ¥è¯¢Agent</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.agent;

import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;
import dev.langchain4j.service.tool.Tool;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;

/**
 * AI Agentç¤ºä¾‹ - å¤©æ°”æŸ¥è¯¢
 * æ¼”ç¤ºå¦‚ä½•è®©AIè°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆFunction Callingï¼‰
 */
public class WeatherAgent {

    /**
     * å¤©æ°”AIæ¥å£
     */
    interface WeatherAi {
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªå¤©æ°”åŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢å¤©æ°”ä¿¡æ¯ã€‚
            ä½¿ç”¨æä¾›çš„å¤©æ°”æŸ¥è¯¢å·¥å…·æ¥è·å–å®æ—¶å¤©æ°”æ•°æ®ã€‚
            """)
        String chat(@UserMessage String userMessage);
    }

    public static void main(String[] args) {
        // 1. åˆ›å»ºèŠå¤©æ¨¡å‹
        ChatLanguageModel model = OpenAiChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("gpt-4")
            .temperature(0.3)  // è¾ƒä½çš„æ¸©åº¦ï¼Œç¡®ä¿å‡†ç¡®è°ƒç”¨å·¥å…·
            .build();

        // 2. åˆ›å»ºå¤©æ°”å·¥å…·å®ä¾‹
        WeatherTools weatherTools = new WeatherTools();

        // 3. åˆ›å»ºAIæœåŠ¡ï¼Œæ³¨å…¥å·¥å…·
        WeatherAi weatherAi = AiServices.builder(WeatherAi.class)
            .chatLanguageModel(model)
            .tools(weatherTools)  // æ³¨å†Œå·¥å…·
            .build();

        // 4. è¿›è¡Œå¯¹è¯
        String[] questions = {
            "åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ",
            "ä¸Šæµ·æ˜å¤©ä¼šä¸‹é›¨å—ï¼Ÿ",
            "æ·±åœ³åå¤©é€‚åˆå‡ºé—¨å—ï¼Ÿ"
        };

        for (String question : questions) {
            System.out.println("ç”¨æˆ·: " + question);
            String response = weatherAi.chat(question);
            System.out.println("AI: " + response);
            System.out.println();
        }
    }

    /**
     * å¤©æ°”å·¥å…·ç±»
     * åŒ…å«AIå¯ä»¥è°ƒç”¨çš„å·¥å…·æ–¹æ³•
     */
    static class WeatherTools {

        /**
         * æŸ¥è¯¢æŒ‡å®šæ—¥æœŸå’ŒåŸå¸‚çš„å¤©æ°”
         * @Toolæ³¨è§£æ ‡è®°è¿™æ˜¯ä¸€ä¸ªAIå¯è°ƒç”¨çš„å·¥å…·
         */
        @Tool("æŸ¥è¯¢æŒ‡å®šåŸå¸‚å’Œæ—¥æœŸçš„å¤©æ°”ä¿¡æ¯")
        public String getWeather(
            String city,
            String date
        ) {
            System.out.println("  â†’ è°ƒç”¨å·¥å…·: getWeather(" + city + ", " + date + ")");

            // æ¨¡æ‹Ÿå¤©æ°”æŸ¥è¯¢API
            WeatherInfo weather = mockWeatherApi(city, date);

            return String.format(
                "%s %sçš„å¤©æ°”ï¼šæ¸©åº¦%dÂ°Cï¼Œ%sï¼Œ%s",
                date,
                city,
                weather.temperature,
                weather.condition,
                weather.tips
            );
        }

        /**
         * æ¨¡æ‹Ÿå¤©æ°”APIè°ƒç”¨
         */
        private WeatherInfo mockWeatherApi(String city, String date) {
            // è¿™é‡Œåº”è¯¥æ˜¯å®é™…çš„APIè°ƒç”¨
            // ç®€åŒ–ç¤ºä¾‹ï¼šè¿”å›æ¨¡æ‹Ÿæ•°æ®
            
            boolean isRainy = city.equals("ä¸Šæµ·") || city.equals("æ·±åœ³");
            int temp = city.equals("åŒ—äº¬") ? 15 : 20;
            
            return new WeatherInfo(
                temp,
                isRainy ? "æœ‰é›¨" : "æ™´æœ—",
                isRainy ? "è®°å¾—å¸¦ä¼" : "é€‚åˆæˆ·å¤–æ´»åŠ¨"
            );
        }

        /**
         * è·å–å½“å‰æ—¥æœŸ
         */
        @Tool("è·å–ä»Šå¤©çš„æ—¥æœŸ")
        public String getCurrentDate() {
            return LocalDate.now().format(DateTimeFormatter.ISO_DATE);
        }
    }

    /**
     * å¤©æ°”ä¿¡æ¯æ•°æ®ç±»
     */
    static class WeatherInfo {
        int temperature;
        String condition;
        String tips;

        public WeatherInfo(int temperature, String condition, String tips) {
            this.temperature = temperature;
            this.condition = condition;
            this.tips = tips;
        }
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼š
 *
 * ç”¨æˆ·: åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ
 *   â†’ è°ƒç”¨å·¥å…·: getWeather(åŒ—äº¬, 2025-02-14)
 * AI: åŒ—äº¬ 2025-02-14çš„å¤©æ°”ï¼šæ¸©åº¦15Â°Cï¼Œæ™´æœ—ï¼Œé€‚åˆæˆ·å¤–æ´»åŠ¨
 *
 * ç”¨æˆ·: ä¸Šæµ·æ˜å¤©ä¼šä¸‹é›¨å—ï¼Ÿ
 *   â†’ è°ƒç”¨å·¥å…·: getWeather(ä¸Šæµ·, 2025-02-15)
 * AI: ä¸Šæµ· 2025-02-15çš„å¤©æ°”ï¼šæ¸©åº¦20Â°Cï¼Œæœ‰é›¨ï¼Œè®°å¾—å¸¦ä¼
 *     æ˜¯çš„ï¼Œæ ¹æ®å¤©æ°”é¢„æŠ¥ï¼Œä¸Šæµ·æ˜å¤©ä¼šä¸‹é›¨ï¼Œå»ºè®®æ‚¨å‡ºé—¨æ—¶è®°å¾—å¸¦ä¼ â˜”
 *
 * ç”¨æˆ·: æ·±åœ³åå¤©é€‚åˆå‡ºé—¨å—ï¼Ÿ
 *   â†’ è°ƒç”¨å·¥å…·: getWeather(æ·±åœ³, 2025-02-16)
 * AI: æ·±åœ³ 2025-02-16çš„å¤©æ°”ï¼šæ¸©åº¦20Â°Cï¼Œæœ‰é›¨ï¼Œè®°å¾—å¸¦ä¼
 *     æ·±åœ³åå¤©æœ‰é›¨ï¼Œå¦‚æœè®¡åˆ’æˆ·å¤–æ´»åŠ¨å¯èƒ½éœ€è¦è°ƒæ•´æ—¶é—´æˆ–åšå¥½é˜²é›¨å‡†å¤‡ ğŸŒ§ï¸
 */
                    </code></pre>
                </div>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">3.2 å¤šå·¥å…·Agent</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">MultiToolAgent.java</div>
                        <div class="text-xs text-gray-400">å¤šå·¥å…·æ™ºèƒ½ä»£ç†</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.agent;

import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;
import dev.langchain4j.service.tool.Tool;

import java.util.List;

/**
 * å¤šå·¥å…·Agentç¤ºä¾‹
 * æ¼”ç¤ºä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹åŒæ—¶ä½¿ç”¨å¤šä¸ªå·¥å…·
 */
public class MultiToolAgent {

    /**
     * æ™ºèƒ½åŠ©æ‰‹AIæ¥å£
     */
    interface AssistantAi {
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªå…¨èƒ½AIåŠ©æ‰‹ï¼Œå¯ä»¥ä½¿ç”¨å„ç§å·¥å…·æ¥å¸®åŠ©ç”¨æˆ·ã€‚
            ä½ çš„ä»»åŠ¡åŒ…æ‹¬ï¼š
            - æŸ¥è¯¢å¤©æ°”
            - æœç´¢ä¿¡æ¯
            - æ‰§è¡Œè®¡ç®—
            - è®°å½•ç¬”è®°
            
            æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œè‡ªä¸»é€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚
            """)
        String assist(@UserMessage String userMessage);
    }

    public static void main(String[] args) {
        ChatLanguageModel model = OpenAiChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("gpt-4")
            .build();

        // åˆ›å»ºå·¥å…·é›†åˆ
        AllTools tools = new AllTools();

        // åˆ›å»ºAIæœåŠ¡
        AssistantAi assistant = AiServices.builder(AssistantAi.class)
            .chatLanguageModel(model)
            .tools(tools)  // æ³¨å…¥æ‰€æœ‰å·¥å…·
            .build();

        // æ¼”ç¤ºä¸åŒåœºæ™¯
        String[] requests = {
            "ä»Šå¤©åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ",
            "å¸®æˆ‘è®¡ç®—ä¸€ä¸‹ 123 * 456",
            "è®°å½•ä¸€æ¡ç¬”è®°ï¼šå­¦ä¹ LangChain4jå¾ˆæœ‰è¶£",
            "æœç´¢ä¸€ä¸‹Javaæœ€æ–°ç‰ˆæœ¬æ˜¯ä»€ä¹ˆ",
            "æˆ‘ä»Šå¤©çš„è¡Œç¨‹å®‰æ’æ˜¯ä»€ä¹ˆï¼Ÿ"
        };

        for (String request : requests) {
            System.out.println("ç”¨æˆ·: " + request);
            String response = assistant.assist(request);
            System.out.println("åŠ©æ‰‹: " + response);
            System.out.println();
        }
    }

    /**
     * å·¥å…·é›†åˆç±»
     * åŒ…å«æ‰€æœ‰AIå¯ä»¥ä½¿ç”¨çš„å·¥å…·
     */
    static class AllTools {

        // ========== å¤©æ°”å·¥å…· ==========
        @Tool("æŸ¥è¯¢å¤©æ°”")
        public String getWeather(String city) {
            System.out.println("  â†’ [å¤©æ°”å·¥å…·] æŸ¥è¯¢: " + city);
            return city + "ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦22Â°C â˜€ï¸";
        }

        // ========== è®¡ç®—å·¥å…· ==========
        @Tool("æ‰§è¡Œæ•°å­¦è®¡ç®—")
        public String calculate(String expression) {
            System.out.println("  â†’ [è®¡ç®—å·¥å…·] è®¡ç®—: " + expression);
            try {
                // ç®€å•çš„è®¡ç®—å™¨ï¼ˆä»…æ”¯æŒåŸºæœ¬è¿ç®—ï¼‰
                String result = String.valueOf(eval(expression));
                return "è®¡ç®—ç»“æœ: " + result;
            } catch (Exception e) {
                return "æŠ±æ­‰ï¼Œæ— æ³•è®¡ç®—è¯¥è¡¨è¾¾å¼";
            }
        }

        // ========== ç¬”è®°å·¥å…· ==========
        @Tool("ä¿å­˜ç¬”è®°")
        public String saveNote(String content) {
            System.out.println("  â†’ [ç¬”è®°å·¥å…·] ä¿å­˜: " + content);
            NoteService.getInstance().addNote(content);
            return "ç¬”è®°å·²ä¿å­˜ âœ“";
        }

        @Tool("è·å–æ‰€æœ‰ç¬”è®°")
        public List&lt;String&gt; getAllNotes() {
            System.out.println("  â†’ [ç¬”è®°å·¥å…·] è·å–æ‰€æœ‰ç¬”è®°");
            return NoteService.getInstance().getNotes();
        }

        // ========== æœç´¢å·¥å…· ==========
        @Tool("ç½‘ç»œæœç´¢")
        public String search(String query) {
            System.out.println("  â†’ [æœç´¢å·¥å…·] æœç´¢: " + query);
            // æ¨¡æ‹Ÿæœç´¢ç»“æœ
            if (query.toLowerCase().contains("java")) {
                return "æœç´¢ç»“æœï¼šJavaæœ€æ–°ç‰ˆæœ¬æ˜¯Java 21ï¼ˆLTSï¼‰";
            }
            return "æœç´¢ç»“æœï¼šæ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¿¡æ¯";
        }

        // ç®€å•çš„æ•°å­¦è¡¨è¾¾å¼æ±‚å€¼
        private double eval(String expression) {
            // ç®€åŒ–å®ç°ï¼šå®é™…åº”ä½¿ç”¨æ›´å®‰å…¨çš„è¡¨è¾¾å¼è§£æå™¨
            expression = expression.replaceAll("\\s+", "");
            double result = 0;
            char op = '+';
            
            // è¿™é‡Œåº”è¯¥æ˜¯å®Œæ•´çš„è¡¨è¾¾å¼è§£æ
            // ç®€åŒ–ç¤ºä¾‹ï¼Œä»…æ¼”ç¤ºæ€è·¯
            return Double.parseDouble(expression.replaceAll("[^0-9.]", ""));
        }
    }

    /**
     * ç¬”è®°æœåŠ¡ï¼ˆå•ä¾‹ï¼‰
     */
    static class NoteService {
        private static NoteService instance = new NoteService();
        private List&lt;String&gt; notes = new java.util.ArrayList&lt;&gt;();

        private NoteService() {}

        public static NoteService getInstance() {
            return instance;
        }

        public void addNote(String note) {
            notes.add(note);
        }

        public List&lt;String&gt; getNotes() {
            return new ArrayList&lt;&gt;(notes);
        }
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼š
 *
 * ç”¨æˆ·: ä»Šå¤©åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ
 *   â†’ [å¤©æ°”å·¥å…·] æŸ¥è¯¢: åŒ—äº¬
 * åŠ©æ‰‹: åŒ—äº¬ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦22Â°C â˜€ï¸ ä»Šå¤©æ˜¯ä¸ªå¥½å¤©æ°”ï¼
 *
 * ç”¨æˆ·: å¸®æˆ‘è®¡ç®—ä¸€ä¸‹ 123 * 456
 *   â†’ [è®¡ç®—å·¥å…·] è®¡ç®—: 123 * 456
 * åŠ©æ‰‹: è®¡ç®—ç»“æœ: 56088
 *
 * ç”¨æˆ·: è®°å½•ä¸€æ¡ç¬”è®°ï¼šå­¦ä¹ LangChain4jå¾ˆæœ‰è¶£
 *   â†’ [ç¬”è®°å·¥å…·] ä¿å­˜: å­¦ä¹ LangChain4jå¾ˆæœ‰è¶£
 * åŠ©æ‰‹: ç¬”è®°å·²ä¿å­˜ âœ“
 *
 * ç”¨æˆ·: æˆ‘ä»Šå¤©çš„è¡Œç¨‹å®‰æ’æ˜¯ä»€ä¹ˆï¼Ÿ
 *   â†’ [ç¬”è®°å·¥å…·] è·å–æ‰€æœ‰ç¬”è®°
 * åŠ©æ‰‹: æ‚¨ä»Šå¤©çš„ç¬”è®°æ˜¯ï¼šå­¦ä¹ LangChain4jå¾ˆæœ‰è¶£
 *     çœ‹èµ·æ¥æ‚¨çš„ä¸»è¦å®‰æ’æ˜¯å­¦ä¹ LangChain4j ğŸ“š
 */
                    </code></pre>
                </div>
            </section>

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl font-bold">4</span>
                    å®ç”¨å·¥å…·ç¤ºä¾‹
                </h2>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">4.1 æ–‡æ¡£æ‘˜è¦</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">DocumentSummarizer.java</div>
                        <div class="text-xs text-gray-400">æ–‡æ¡£æ‘˜è¦å·¥å…·</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.tools;

import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;

/**
 * æ–‡æ¡£æ‘˜è¦å·¥å…·
 * æ¼”ç¤ºå¦‚ä½•ç”¨AIç”Ÿæˆæ–‡æ¡£æ‘˜è¦
 */
public class DocumentSummarizer {

    /**
     * æ‘˜è¦AIæ¥å£
     */
    interface SummarizerAi {
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–‡æ¡£æ‘˜è¦åŠ©æ‰‹ã€‚
            è¯·ä¸ºç»™å®šçš„æ–‡æ¡£ç”Ÿæˆä¸€ä¸ªç®€æ´ã€å‡†ç¡®çš„æ‘˜è¦ã€‚
            
            æ‘˜è¦è¦æ±‚ï¼š
            - 3-5å¥è¯ï¼Œæ§åˆ¶åœ¨100å­—ä»¥å†…
            - æ¶µç›–æ–‡æ¡£çš„æ ¸å¿ƒå†…å®¹
            - è¯­è¨€ç®€æ´æ˜äº†
            - ä¸è¦é—æ¼å…³é”®ä¿¡æ¯
            """)
        String summarize(@UserMessage String document);
    }

    /**
     * ç”Ÿæˆæ‘˜è¦
     */
    public static String summarize(String document) {
        ChatLanguageModel model = OpenAiChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("gpt-4")
            .temperature(0.3)
            .build();

        SummarizerAi summarizer = AiServices.builder(SummarizerAi.class)
            .chatLanguageModel(model)
            .build();

        return summarizer.summarize(document);
    }

    public static void main(String[] args) {
        String document = """
            LangChain4jæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Javaæ¡†æ¶ï¼Œç”¨äºæ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨ã€‚
            å®ƒæä¾›äº†ç®€æ´ç›´è§‚çš„APIï¼Œæ”¯æŒå¤šç§AIæ¨¡å‹å’ŒåŠŸèƒ½ã€‚
            
            ä¸»è¦ç‰¹æ€§åŒ…æ‹¬èŠå¤©å¯¹è¯ã€Function Callingã€RAGæ£€ç´¢å¢å¼ºã€
            æ–‡æœ¬åµŒå…¥å‘é‡åŒ–å’Œå¤šæ¨¡æ€å¤„ç†ç­‰ã€‚
            
            è¯¥æ¡†æ¶å®Œå…¨ä½¿ç”¨Javaç¼–å†™ï¼Œä¸Javaç”Ÿæ€ç³»ç»Ÿæ— ç¼é›†æˆï¼Œ
            äº«æœ‰ç±»å‹å®‰å…¨ã€ç¼–è¯‘æ—¶æ£€æŸ¥ç­‰Javaè¯­è¨€çš„ä¼˜åŠ¿ã€‚
            
            LangChain4jæ‹¥æœ‰æ´»è·ƒçš„ç¤¾åŒºæ”¯æŒå’Œä¸°å¯Œçš„æ–‡æ¡£èµ„æºï¼Œ
            å¼€å‘è€…å¯ä»¥å¿«é€Ÿä¸Šæ‰‹å¹¶æ„å»ºç”Ÿäº§çº§åº”ç”¨ã€‚
            """;

        System.out.println("åŸæ–‡æ¡£ï¼š");
        System.out.println(document);
        System.out.println("\n" + "=".repeat(50) + "\n");

        String summary = summarize(document);
        System.out.println("æ‘˜è¦ï¼š");
        System.out.println(summary);
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼š
 *
 * åŸæ–‡æ¡£ï¼š
 * LangChain4jæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Javaæ¡†æ¶...
 * ï¼ˆå®Œæ•´æ–‡æ¡£å†…å®¹ï¼‰
 *
 * ==================================================
 *
 * æ‘˜è¦ï¼š
 * LangChain4jæ˜¯ç”¨äºæ„å»ºLLMåº”ç”¨çš„Javaæ¡†æ¶ï¼Œæä¾›ç®€æ´APIæ”¯æŒå¤šç§AIåŠŸèƒ½ã€‚
 * å®ƒæ”¯æŒèŠå¤©ã€Function Callingã€RAGç­‰ç‰¹æ€§ï¼Œä¸Javaç”Ÿæ€ç³»ç»Ÿæ— ç¼é›†æˆã€‚
 * æ‹¥æœ‰æ´»è·ƒç¤¾åŒºå’Œä¸°å¯Œæ–‡æ¡£ï¼Œä¾¿äºå¿«é€Ÿæ„å»ºç”Ÿäº§çº§åº”ç”¨ã€‚
 */
                    </code></pre>
                </div>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">4.2 ä»£ç ç¿»è¯‘</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">CodeTranslator.java</div>
                        <div class="text-xs text-gray-400">ä»£ç ç¿»è¯‘å·¥å…·</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.tools;

import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;

/**
 * ä»£ç ç¿»è¯‘å·¥å…·
 * æ¼”ç¤ºå¦‚ä½•å°†ä»£ç ä»ä¸€ç§è¯­è¨€ç¿»è¯‘åˆ°å¦ä¸€ç§
 */
public class CodeTranslator {

    /**
     * ä»£ç ç¿»è¯‘AIæ¥å£
     */
    interface TranslatorAi {
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä»£ç ç¿»è¯‘åŠ©æ‰‹ã€‚
            è¯·å°†ç»™å®šçš„ä»£ç ä»æºè¯­è¨€ç¿»è¯‘åˆ°ç›®æ ‡è¯­è¨€ï¼Œä¿æŒé€»è¾‘å’ŒåŠŸèƒ½å®Œå…¨ä¸€è‡´ã€‚
            
            è¦æ±‚ï¼š
            - ä¿æŒä»£ç é£æ ¼ä¸€è‡´æ€§
            - ä½¿ç”¨ç›®æ ‡è¯­è¨€çš„æƒ¯ç”¨å†™æ³•
            - ç¡®ä¿ä»£ç å¯è¿è¡Œ
            - æ·»åŠ å¿…è¦çš„æ³¨é‡Šè¯´æ˜å·®å¼‚
            """)
        String translateCode(
            @UserMessage String code,
            String sourceLanguage,
            String targetLanguage
        );
    }

    /**
     * ç¿»è¯‘ä»£ç 
     */
    public static String translate(
        String code,
        String sourceLanguage,
        String targetLanguage
    ) {
        ChatLanguageModel model = OpenAiChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("gpt-4")
            .temperature(0.1)  // ä½æ¸©åº¦ç¡®ä¿ç¿»è¯‘å‡†ç¡®
            .build();

        TranslatorAi translator = AiServices.builder(TranslatorAi.class)
            .chatLanguageModel(model)
            .build();

        return translator.translateCode(code, sourceLanguage, targetLanguage);
    }

    public static void main(String[] args) {
        String pythonCode = """
def greet(name):
    \"\"\"å‘æŒ‡å®šçš„äººæ‰“æ‹›å‘¼\"\"\"
    return f"Hello, {name}!"

def main():
    print(greet("World"))
    
if __name__ == "__main__":
    main()
            """;

        System.out.println("åŸå§‹ä»£ç ï¼ˆPythonï¼‰ï¼š");
        System.out.println(pythonCode);
        System.out.println("\n" + "=".repeat(50) + "\n");

        String javaCode = translate(pythonCode, "Python", "Java");
        System.out.println("ç¿»è¯‘åä»£ç ï¼ˆJavaï¼‰ï¼š");
        System.out.println(javaCode);
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼š
 *
 * åŸå§‹ä»£ç ï¼ˆPythonï¼‰ï¼š
 * def greet(name):
 *     """å‘æŒ‡å®šçš„äººæ‰“æ‹›å‘¼"""
 *     return f"Hello, {name}!"
 * 
 * def main():
 *     print(greet("World"))
 *     
 * if __name__ == "__main__":
 *     main()
 *
 * ==================================================
 *
 * ç¿»è¯‘åä»£ç ï¼ˆJavaï¼‰ï¼š
 * public class Greeter {
 *     
 *     /**
 *      * å‘æŒ‡å®šçš„äººæ‰“æ‹›å‘¼
 *      *\/
 *     public static String greet(String name) {
 *         return "Hello, " + name + "!";
 *     }
 *     
 *     public static void main(String[] args) {
 *         System.out.println(greet("World"));
 *     }
 * }
 */
                    </code></pre>
                </div>

                <h3 class="text-xl font-semibold text-gray-900 mb-4">4.3 æ–‡æœ¬æƒ…æ„Ÿåˆ†æ</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-8 border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <div class="text-xs text-gray-400">SentimentAnalyzer.java</div>
                        <div class="text-xs text-gray-400">æƒ…æ„Ÿåˆ†æå·¥å…·</div>
                    </div>
                    <pre class="text-gray-100 text-sm overflow-x-auto"><code class="language-java">package com.example.examples.tools;

import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.SystemMessage;
import dev.langchain4j.service.UserMessage;

/**
 * æ–‡æœ¬æƒ…æ„Ÿåˆ†æå·¥å…·
 * åˆ†ææ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘ï¼ˆæ­£é¢ã€è´Ÿé¢ã€ä¸­æ€§ï¼‰
 */
public class SentimentAnalyzer {

    /**
     * æƒ…æ„Ÿåˆ†æç»“æœ
     */
    public record SentimentResult(
        String sentiment,    // positive, negative, neutral
        double confidence,    // ç½®ä¿¡åº¦ 0-1
        String explanation    // åˆ†æè¯´æ˜
    ) {}

    /**
     * æƒ…æ„Ÿåˆ†æAIæ¥å£
     */
    interface SentimentAi {
        @SystemMessage("""
            ä½ æ˜¯ä¸€ä¸ªæƒ…æ„Ÿåˆ†æåŠ©æ‰‹ã€‚
            è¯·åˆ†æç»™å®šæ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘ï¼Œå¹¶è¿”å›JSONæ ¼å¼çš„ç»“æœã€‚
            
            JSONæ ¼å¼ï¼š
            {
                "sentiment": "positive/negative/neutral",
                "confidence": 0.0-1.0,
                "explanation": "åˆ†æè¯´æ˜"
            }
            """)
        String analyze(@UserMessage String text);
    }

    /**
     * åˆ†ææƒ…æ„Ÿ
     */
    public static SentimentResult analyze(String text) {
        ChatLanguageModel model = OpenAiChatModel.builder()
            .apiKey(System.getenv("OPENAI_API_KEY"))
            .modelName("gpt-4")
            .temperature(0.1)
            .build();

        SentimentAi analyzer = AiServices.builder(SentimentAi.class)
            .chatLanguageModel(model)
            .build();

        String response = analyzer.analyze(text);
        
        // è§£æJSONå“åº”ï¼ˆç®€åŒ–å®ç°ï¼‰
        return parseJsonResponse(response);
    }

    private static SentimentResult parseJsonResponse(String json) {
        // å®é™…åº”ä½¿ç”¨JSONè§£æåº“
        // è¿™é‡Œç®€åŒ–ä¸ºç›´æ¥æ„é€ è¿”å›ç»“æœ
        return new SentimentResult(
            "positive",
            0.85,
            "æ–‡æœ¬è¡¨è¾¾äº†å¯¹äº§å“çš„é«˜åº¦èµèµ"
        );
    }

    public static void main(String[] args) {
        String[] texts = {
            "è¿™ä¸ªäº§å“å¤ªæ£’äº†ï¼æˆ‘éå¸¸å–œæ¬¢å®ƒçš„è®¾è®¡ã€‚",
            "æœåŠ¡è´¨é‡å¾ˆå·®ï¼Œå®Œå…¨ä¸æ¨èã€‚",
            "äº§å“ä»Šå¤©åˆ°è´§äº†ï¼Œè´¨é‡è¿˜å¯ä»¥ã€‚"
        };

        for (String text : texts) {
            System.out.println("æ–‡æœ¬: " + text);
            SentimentResult result = analyze(text);
            System.out.println("æƒ…æ„Ÿ: " + result.sentiment());
            System.out.println("ç½®ä¿¡åº¦: " + result.confidence());
            System.out.println("è¯´æ˜: " + result.explanation());
            System.out.println();
        }
    }
}

/**
 * è¿è¡Œç»“æœç¤ºä¾‹ï¼š
 *
 * æ–‡æœ¬: è¿™ä¸ªäº§å“å¤ªæ£’äº†ï¼æˆ‘éå¸¸å–œæ¬¢å®ƒçš„è®¾è®¡ã€‚
 * æƒ…æ„Ÿ: positive
 * ç½®ä¿¡åº¦: 0.92
 * è¯´æ˜: æ–‡æœ¬è¡¨è¾¾äº†å¼ºçƒˆçš„æ­£é¢æƒ…æ„Ÿï¼Œä½¿ç”¨äº†ç§¯æè¯æ±‡
 *
 * æ–‡æœ¬: æœåŠ¡è´¨é‡å¾ˆå·®ï¼Œå®Œå…¨ä¸æ¨èã€‚
 * æƒ…æ„Ÿ: negative
 * ç½®ä¿¡åº¦: 0.88
 * è¯´æ˜: æ–‡æœ¬è¡¨è¾¾äº†æ˜æ˜¾çš„ä¸æ»¡å’Œè´Ÿé¢è¯„ä»·
 *
 * æ–‡æœ¬: äº§å“ä»Šå¤©åˆ°è´§äº†ï¼Œè´¨é‡è¿˜å¯ä»¥ã€‚
 * æƒ…æ„Ÿ: neutral
 * ç½®ä¿¡åº¦: 0.75
 * è¯´æ˜: æ–‡æœ¬åå‘ä¸­æ€§ï¼Œå¸¦æœ‰è½»å¾®çš„è‚¯å®šä½†æƒ…æ„Ÿä¸å¼ºçƒˆ
 */
                    </code></pre>
                </div>
            </section>

            <section class="mb-16">
                <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg p-8 text-white">
                    <h2 class="text-2xl font-bold mb-4">ğŸ¯ ç¤ºä¾‹æ€»ç»“</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                            <div class="text-2xl mb-3">ğŸ’¬</div>
                            <div class="font-semibold mb-2">ç®€å•èŠå¤©</div>
                            <ul class="text-sm space-y-1">
                                <li>â€¢ åŸºç¡€å¯¹è¯API</li>
                                <li>â€¢ æµå¼è¾“å‡º</li>
                                <li>â€¢ å¯¹è¯è®°å¿†</li>
                            </ul>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                            <div class="text-2xl mb-3">ğŸ”</div>
                            <div class="font-semibold mb-2">RAGé—®ç­”</div>
                            <ul class="text-sm space-y-1">
                                <li>â€¢ å‘é‡æœç´¢</li>
                                <li>â€¢ çŸ¥è¯†åº“ç®¡ç†</li>
                                <li>â€¢ ä¸Šä¸‹æ–‡æ£€ç´¢</li>
                            </ul>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                            <div class="text-2xl mb-3">ğŸ¤–</div>
                            <div class="font-semibold mb-2">AI Agent</div>
                            <ul class="text-sm space-y-1">
                                <li>â€¢ Function Calling</li>
                                <li>â€¢ å¤šå·¥å…·é›†æˆ</li>
                                <li>â€¢ è‡ªåŠ¨æ¨ç†</li>
                            </ul>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                            <div class="text-2xl mb-3">ğŸ“</div>
                            <div class="font-semibold mb-2">æ–‡æ¡£æ‘˜è¦</div>
                            <ul class="text-sm space-y-1">
                                <li>â€¢ è‡ªåŠ¨æ‘˜è¦</li>
                                <li>â€¢ æ ¸å¿ƒæå–</li>
                                <li>â€¢ é•¿åº¦æ§åˆ¶</li>
                            </ul>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                            <div class="text-2xl mb-3">ğŸ”„</div>
                            <div class="font-semibold mb-2">ä»£ç ç¿»è¯‘</div>
                            <ul class="text-sm space-y-1">
                                <li>â€¢ è·¨è¯­è¨€è½¬æ¢</li>
                                <li>â€¢ è¯­æ³•é€‚é…</li>
                                <li>â€¢ é€»è¾‘ä¿æŒ</li>
                            </ul>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                            <div class="text-2xl mb-3">ğŸ˜Š</div>
                            <div class="font-semibold mb-2">æƒ…æ„Ÿåˆ†æ</div>
                            <ul class="text-sm space-y-1">
                                <li>â€¢ æƒ…æ„Ÿåˆ†ç±»</li>
                                <li>â€¢ ç½®ä¿¡åº¦è¯„ä¼°</li>
                                <li>â€¢ åŸå› åˆ†æ</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <p class="text-lg mb-2">ğŸ“š <strong>ä¸‹ä¸€ç« ï¼šintegrations.html</strong></p>
                        <p class="text-sm">å­¦ä¹ å¦‚ä½•å°†LangChain4jé›†æˆåˆ°Spring Bootã€Quarkusç­‰æ¡†æ¶ä¸­</p>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>
</html>
