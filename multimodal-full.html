<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¤šæ¨¡æ€èƒ½åŠ› - LangChain4j å­¦ä¹ æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white text-gray-800 antialiased">
    <div class="flex min-h-screen">
        <aside class="w-[280px] fixed left-0 top-0 h-full bg-white border-r border-gray-200 overflow-y-auto z-50">
            <a href="index.html" class="flex items-center gap-3 mb-8 text-gray-900 no-underline">
                <div class="w-9 h-9 bg-indigo-600 rounded-lg flex items-center justify-center text-white text-xl">âš¡</div>
                <span class="font-bold text-xl">LangChain4j</span>
            </a>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">å…¥é—¨</div>
                <ul class="list-none">
                    <li><a href="index.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é¦–é¡µ</a></li>
                    <li><a href="getting-started.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">å¿«é€Ÿå…¥é—¨</a></li>
                    <li><a href="core-concepts.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ ¸å¿ƒæ¦‚å¿µ</a></li>
                </ul>
            </div>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">åŸºç¡€</div>
                <ul class="list-none">
                    <li><a href="embedding-models.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">Embeddingæ¨¡å‹</a></li>
                    <li><a href="prompt-templates.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">Promptæ¨¡æ¿</a></li>
                    <li><a href="output-parsers.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">è¾“å‡ºè§£æ</a></li>
                    <li><a href="model-providers.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ¨¡å‹æä¾›å•†</a></li>
                </ul>
            </div>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">è¿›é˜¶</div>
                <ul class="list-none">
                    <li><a href="function-calling-deep.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">Function Calling</a></li>
                    <li><a href="advanced-features.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é«˜çº§ç‰¹æ€§</a></li>
                    <li><a href="multimodal-full.html" class="block text-indigo-700 font-medium py-2 px-3 text-sm rounded-md bg-primary-50">å¤šæ¨¡æ€èƒ½åŠ›</a></li>
                    <li><a href="rag-complete.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">RAGçŸ¥è¯†åº“</a></li>
                    <li><a href="project-rag-kb.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">RAGé¡¹ç›®å®æˆ˜</a></li>
                    <li><a href="project-ai-assistant.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">AIåŠ©æ‰‹</a></li>
                    <li><a href="project-chatbot.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">èŠå¤©æœºå™¨äºº</a></li>
                </ul>
            </div>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">å®è·µ</div>
                <ul class="list-none">
                    <li><a href="best-practices.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æœ€ä½³å®è·µ</a></li>
                    <li><a href="examples.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">å®æˆ˜ç¤ºä¾‹</a></li>
                    <li><a href="integrations.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ¡†æ¶é›†æˆ</a></li>
                    <li><a href="testing-strategies.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æµ‹è¯•ç­–ç•¥</a></li>
                    <li><a href="performance-tuning.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ€§èƒ½è°ƒä¼˜</a></li>
                </ul>
            </div>

            <div class="mb-8">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">å…¶ä»–</div>
                <ul class="list-none">
                    <li><a href="deep-dive.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">æ·±åº¦è§£æ</a></li>
                    <li><a href="error-handling.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é”™è¯¯å¤„ç†</a></li>
                    <li><a href="moderation-safety.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">å†…å®¹å®¡æ ¸</a></li>
                    <li><a href="troubleshooting.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é—®é¢˜æ’æŸ¥</a></li>
                    <li><a href="interview-prep.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">é¢è¯•å‡†å¤‡</a></li>
                    <li><a href="practice.html" class="block text-gray-600 no-underline py-2 px-3 text-sm rounded-md hover:bg-gray-100 transition-all">ç»ƒä¹ é¡¹ç›®</a></li>
                </ul>
            </div>
        </aside>

        <main class="flex-1 ml-[280px] px-8 py-12 max-w-7xl">
            <!-- é¡µé¢æ ‡ç­¾ -->
            <div class="flex items-center gap-3 mb-8 text-sm">
                <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium">å¤šæ¨¡æ€AI</span>
                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">è¿›é˜¶</span>
                <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium">~15åˆ†é’Ÿ</span>
            </div>

            <!-- é¡µé¢æ ‡é¢˜ -->
            <h1 class="text-5xl font-bold text-gray-900 mb-6">å¤šæ¨¡æ€èƒ½åŠ›</h1>
            <p class="text-xl text-gray-600 mb-8 leading-relaxed">
                LangChain4jæä¾›äº†å¼ºå¤§çš„å¤šæ¨¡æ€AIèƒ½åŠ›ï¼Œè®©ä½ çš„åº”ç”¨ä¸ä»…èƒ½ç†è§£æ–‡æœ¬ï¼Œè¿˜èƒ½å¤„ç†å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§æ•°æ®ç±»å‹ã€‚
                æœ¬ç« å°†æ·±å…¥æ¢è®¨å¤šæ¨¡æ€æ¨¡å‹çš„é›†æˆã€ä½¿ç”¨æ–¹æ³•ä»¥åŠå¤šæ¨¡æ€RAGç³»ç»Ÿçš„æ„å»ºã€‚
            </p>

            <!-- ç« èŠ‚ç›®å½• -->
            <div class="bg-gray-50 rounded-lg p-6 mb-10">
                <h2 class="text-lg font-semibold text-gray-900 mb-4">ğŸ“‹ æœ¬ç« ç›®å½•</h2>
                <ol class="space-y-2 text-gray-700">
                    <li class="flex items-start gap-2">
                        <span class="text-indigo-600 font-mono">1.</span>
                        <span><a href="#overview" class="text-indigo-600 hover:underline">å¤šæ¨¡æ€AIæ¦‚è¿°</a></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-indigo-600 font-mono">2.</span>
                        <span><a href="#image-generation" class="text-indigo-600 hover:underline">å›¾åƒç”Ÿæˆèƒ½åŠ›</a></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-indigo-600 font-mono">3.</span>
                        <span><a href="#image-understanding" class="text-indigo-600 hover:underline">å›¾åƒç†è§£èƒ½åŠ›</a></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-indigo-600 font-mono">4.</span>
                        <span><a href="#chat-multimodal" class="text-indigo-600 hover:underline">å¤šæ¨¡æ€å¯¹è¯</a></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-indigo-600 font-mono">5.</span>
                        <span><a href="#multimodal-rag" class="text-indigo-600 hover:underline">å¤šæ¨¡æ€RAGç³»ç»Ÿ</a></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-indigo-600 font-mono">6.</span>
                        <span><a href="#best-practices" class="text-indigo-600 hover:underline">æœ€ä½³å®è·µä¸ä¼˜åŒ–</a></span>
                    </li>
                </ol>
            </div>

            <!-- ç¬¬1èŠ‚ï¼šå¤šæ¨¡æ€AIæ¦‚è¿° -->
            <section id="overview" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600">1</span>
                    å¤šæ¨¡æ€AIæ¦‚è¿°
                </h2>

                <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">ä»€ä¹ˆæ˜¯å¤šæ¨¡æ€AIï¼Ÿ</h3>
                    <p class="text-gray-700 leading-relaxed mb-4">
                        å¤šæ¨¡æ€AIæ˜¯æŒ‡èƒ½å¤Ÿç†è§£å’Œå¤„ç†å¤šç§ç±»å‹æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰çš„AIç³»ç»Ÿã€‚
                        ä¸ä»…èƒ½å¤„ç†æ–‡æœ¬çš„ä¼ ç»ŸLLMä¸åŒï¼Œå¤šæ¨¡æ€æ¨¡å‹å¯ä»¥ï¼š
                    </p>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-1">âœ“</span>
                            <span><strong>ç†è§£å›¾åƒå†…å®¹</strong>ï¼šåˆ†æå›¾ç‰‡ä¸­çš„ç‰©ä½“ã€åœºæ™¯ã€æ–‡å­—ç­‰</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-1">âœ“</span>
                            <span><strong>ç”Ÿæˆå›¾åƒ</strong>ï¼šæ ¹æ®æ–‡æœ¬æè¿°åˆ›å»ºå›¾åƒ</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-1">âœ“</span>
                            <span><strong>è·¨æ¨¡æ€æ¨ç†</strong>ï¼šç»“åˆæ–‡æœ¬å’Œå›¾åƒä¿¡æ¯è¿›è¡Œç»¼åˆåˆ†æ</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-500 mt-1">âœ“</span>
                            <span><strong>å¤šæ¨¡æ€å¯¹è¯</strong>ï¼šåœ¨å¯¹è¯ä¸­å¤„ç†å›¾ç‰‡å’Œæ–‡æœ¬æ··åˆè¾“å…¥</span>
                        </li>
                    </ul>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                        <div class="text-2xl mb-3">ğŸ–¼ï¸</div>
                        <h4 class="font-semibold text-gray-900 mb-2">å›¾åƒç”Ÿæˆ</h4>
                        <p class="text-sm text-gray-600">ä½¿ç”¨DALL-Eã€Imagenç­‰æ¨¡å‹ï¼Œå°†æ–‡æœ¬è½¬æ¢ä¸ºç²¾ç¾çš„å›¾åƒ</p>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                        <div class="text-2xl mb-3">ğŸ‘ï¸</div>
                        <h4 class="font-semibold text-gray-900 mb-2">å›¾åƒç†è§£</h4>
                        <p class="text-sm text-gray-600">ä½¿ç”¨GPT-4Vã€Claude-3ç­‰æ¨¡å‹ï¼Œåˆ†æå›¾åƒå†…å®¹å¹¶ç”Ÿæˆæè¿°</p>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                        <div class="text-2xl mb-3">ğŸ”„</div>
                        <h4 class="font-semibold text-gray-900 mb-2">å¤šæ¨¡æ€å¯¹è¯</h4>
                        <p class="text-sm text-gray-600">åœ¨èŠå¤©ä¸­åŒæ—¶å¤„ç†æ–‡æœ¬å’Œå›¾åƒï¼Œå®ç°è‡ªç„¶äº¤äº’</p>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-5 hover:border-indigo-300 transition-colors">
                        <div class="text-2xl mb-3">ğŸ“š</div>
                        <h4 class="font-semibold text-gray-900 mb-2">å¤šæ¨¡æ€RAG</h4>
                        <p class="text-sm text-gray-600">æ£€ç´¢å’Œç”Ÿæˆç»“åˆï¼Œæ”¯æŒå›¾åƒã€æ–‡æ¡£ç­‰å¤šæ¨¡æ€æ•°æ®</p>
                    </div>
                </div>

                <div class="bg-blue-50 border-l-4 border-blue-500 p-5 rounded-r-lg">
                    <h4 class="font-semibold text-blue-900 mb-2">ğŸ’¡ åº”ç”¨åœºæ™¯</h4>
                    <p class="text-blue-800">
                        å¤šæ¨¡æ€èƒ½åŠ›å¯ä»¥åº”ç”¨äºä¼—å¤šåœºæ™¯ï¼šæ™ºèƒ½å®¢æœï¼ˆåˆ†æç”¨æˆ·ä¸Šä¼ çš„æˆªå›¾ï¼‰ã€å†…å®¹å®¡æ ¸ï¼ˆè¯†åˆ«å›¾ç‰‡ä¸­çš„ä¸å½“å†…å®¹ï¼‰ã€
                        å›¾åƒæ£€ç´¢ï¼ˆæ ¹æ®å›¾ç‰‡æè¿°æœç´¢ç›¸å…³å›¾åƒï¼‰ã€æ–‡æ¡£åˆ†æï¼ˆä»PDFæå–å›¾æ–‡ä¿¡æ¯ï¼‰ã€åˆ›æ„è®¾è®¡ï¼ˆAIè¾…åŠ©ç»˜å›¾ï¼‰ç­‰ã€‚
                    </p>
                </div>
            </section>

            <!-- ç¬¬2èŠ‚ï¼šå›¾åƒç”Ÿæˆèƒ½åŠ› -->
            <section id="image-generation" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600">2</span>
                    å›¾åƒç”Ÿæˆèƒ½åŠ›
                </h2>

                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-5 mb-6">
                    <h4 class="font-semibold text-yellow-900 mb-2">âš ï¸ é‡è¦æç¤º</h4>
                    <p class="text-yellow-800 text-sm">
                        å›¾åƒç”ŸæˆåŠŸèƒ½éœ€è¦å•ç‹¬çš„APIå’Œä¸åŒçš„æ¨¡å‹ï¼ˆå¦‚DALL-Eã€Imagenç­‰ï¼‰ï¼Œ
                        ä¸æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ä¸åŒã€‚è¯·ç¡®ä¿ä½ æœ‰ç›¸åº”çš„APIå¯†é’¥å’Œæƒé™ã€‚
                    </p>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">2.1 åŸºç¡€å›¾åƒç”Ÿæˆ</h3>
                <p class="text-gray-700 mb-4">
                    LangChain4jæä¾›äº†ç»Ÿä¸€çš„å›¾åƒç”ŸæˆAPIï¼Œæ”¯æŒå¤šç§å›¾åƒç”Ÿæˆæ¨¡å‹ã€‚
                    ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨OpenAI DALL-E 3ç”Ÿæˆå›¾åƒçš„ç¤ºä¾‹ï¼š
                </p>

                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - DALL-Eå›¾åƒç”Ÿæˆ</span>
                        <span class="text-xs text-gray-500">ImageGenerationExample.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.model.image.ImageModel;
import dev.langchain4j.model.openai.OpenAiImageModel;
import dev.langchain4j.model.output.Response;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

import static dev.langchain4j.model.openai.OpenAiImageModelName.DALL_E_3;

/**
 * å›¾åƒç”ŸæˆåŸºç¡€ç¤ºä¾‹
 * æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨DALL-E 3ç”Ÿæˆå›¾åƒ
 */
public class ImageGenerationExample {

    public static void main(String[] args) {
        // 1. åˆ›å»ºå›¾åƒæ¨¡å‹
        ImageModel imageModel = OpenAiImageModel.builder()
                .apiKey("your-api-key")  // æ›¿æ¢ä¸ºä½ çš„OpenAI APIå¯†é’¥
                .modelName(DALL_E_3)      // ä½¿ç”¨DALL-E 3æ¨¡å‹
                .size("1024x1024")        // å›¾åƒå°ºå¯¸
                .quality("standard")         // è´¨é‡ï¼šstandardæˆ–hd
                .style("vivid")            // é£æ ¼ï¼švividæˆ–natural
                .build();

        // 2. ç”Ÿæˆå›¾åƒ
        String prompt = "ä¸€åªåœ¨å®‡å®™ä¸­æ¼‚æµ®çš„çŒ«ï¼Œèµ›åšæœ‹å…‹é£æ ¼ï¼Œéœ“è™¹ç¯æ•ˆæœ";
        Response&lt;Image&gt; response = imageModel.generate(prompt);

        // 3. å¤„ç†å“åº”
        Image image = response.content();
        System.out.println("ç”Ÿæˆå›¾åƒçš„URL: " + image.url());

        // å¯é€‰ï¼šä¸‹è½½å›¾åƒåˆ°æœ¬åœ°
        if (image.url() != null) {
            downloadImage(image.url(), "generated-cat.png");
        }
    }

    /**
     * ä¸‹è½½å›¾åƒåˆ°æœ¬åœ°
     */
    private static void downloadImage(String imageUrl, String fileName) {
        try {
            // ä½¿ç”¨Java HTTPå®¢æˆ·ç«¯ä¸‹è½½å›¾åƒï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰
            // å®é™…é¡¹ç›®ä¸­å»ºè®®ä½¿ç”¨Apache HttpClientæˆ–OkHttp
            Path targetPath = Paths.get(fileName);
            // ... ä¸‹è½½é€»è¾‘
            System.out.println("å›¾åƒå·²ä¿å­˜åˆ°: " + targetPath.toAbsolutePath());
        } catch (Exception e) {
            System.err.println("ä¸‹è½½å›¾åƒå¤±è´¥: " + e.getMessage());
        }
    }
}</code></pre>
                </div>

                <div class="bg-green-50 border-l-4 border-green-500 p-5 rounded-r-lg mb-6">
                    <h4 class="font-semibold text-green-900 mb-2">âœ… å…³é”®å‚æ•°è¯´æ˜</h4>
                    <ul class="text-green-800 space-y-1 text-sm">
                        <li><strong>modelName</strong>: ä½¿ç”¨çš„å›¾åƒæ¨¡å‹ï¼ˆDALL_E_3, DALL_E_2ç­‰ï¼‰</li>
                        <li><strong>size</strong>: å›¾åƒå°ºå¯¸ï¼ˆ256x256, 512x512, 1024x1024, 1792x1024ç­‰ï¼‰</li>
                        <li><strong>quality</strong>: å›¾åƒè´¨é‡ï¼ˆstandardæ ‡å‡†ï¼Œhdé«˜æ¸…ï¼‰</li>
                        <li><strong>style</strong>: ç”Ÿæˆé£æ ¼ï¼ˆvividç”ŸåŠ¨ï¼Œnaturalè‡ªç„¶ï¼‰</li>
                        <li><strong>n</strong>: ç”Ÿæˆå›¾åƒæ•°é‡ï¼ˆé»˜è®¤ä¸º1ï¼Œæœ€å¤§ä¸º10ï¼‰</li>
                    </ul>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">2.2 Google Imagené›†æˆ</h3>
                <p class="text-gray-700 mb-4">
                    é™¤äº†OpenAIçš„DALL-Eï¼ŒLangChain4jè¿˜æ”¯æŒGoogleçš„Imagenå›¾åƒç”Ÿæˆæ¨¡å‹ï¼š
                </p>

                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - Imagenå›¾åƒç”Ÿæˆ</span>
                        <span class="text-xs text-gray-500">ImagenGenerationExample.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.model.image.ImageModel;
import dev.langchain4j.model.google.GoogleImageModel;
import dev.langchain4j.model.output.Response;

/**
 * Google Imagenå›¾åƒç”Ÿæˆç¤ºä¾‹
 */
public class ImagenGenerationExample {

    public static void main(String[] args) {
        // 1. åˆ›å»ºImagenæ¨¡å‹
        ImageModel imageModel = GoogleImageModel.builder()
                .apiKey("your-google-api-key")
                .modelName("imagen-3.0-generate-001")  // Imagen 3.0
                .build();

        // 2. ç”Ÿæˆå›¾åƒ
        String prompt = "ä¸€å¹…å±•ç°æ˜¥å¤©çš„æ²¹ç”»ï¼Œè‰²å½©é²œè‰³ï¼Œç»†èŠ‚ä¸°å¯Œ";
        Response&lt;Image&gt; response = imageModel.generate(prompt);

        // 3. å¤„ç†å“åº”
        if (response.content() != null) {
            System.out.println("ç”ŸæˆæˆåŠŸï¼");
            System.out.println("å›¾åƒURL: " + response.content().url());
        }
    }
}</code></pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">2.3 é«˜çº§å›¾åƒç”Ÿæˆé…ç½®</h3>
                <p class="text-gray-700 mb-4">
                    å¯¹äºæ›´å¤æ‚çš„å›¾åƒç”Ÿæˆéœ€æ±‚ï¼Œå¯ä»¥è¿›è¡Œç²¾ç»†åŒ–é…ç½®ï¼š
                </p>

                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - é«˜çº§å›¾åƒç”Ÿæˆ</span>
                        <span class="text-xs text-gray-500">AdvancedImageGeneration.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.model.image.ImageModel;
import dev.langchain4j.model.openai.OpenAiImageModel;
import dev.langchain4j.model.output.Response;

import java.util.List;

/**
 * é«˜çº§å›¾åƒç”Ÿæˆé…ç½®ç¤ºä¾‹
 */
public class AdvancedImageGeneration {

    public static void main(String[] args) {
        ImageModel imageModel = OpenAiImageModel.builder()
                .apiKey("your-api-key")
                .modelName(DALL_E_3)
                .size("1792x1024")      // å®½å±å°ºå¯¸
                .quality("hd")              // é«˜æ¸…è´¨é‡
                .style("vivid")             // ç”ŸåŠ¨é£æ ¼
                .responseFormat("b64_json")  // è¿”å›Base64ç¼–ç è€ŒéURL
                .build();

        String prompt = """
            ä¸€å¹…æœªæ¥åŸå¸‚çš„å…¨æ™¯å›¾ï¼Œ
            é«˜æ¥¼å¤§å¦ç›´æ’äº‘éœ„ï¼Œ
            é£è¡Œæ±½è½¦ç©¿æ¢­å…¶ä¸­ï¼Œ
            å…¨æ¯å¹¿å‘Šç‰Œé—ªçƒï¼Œ
            èµ›åšæœ‹å…‹é£æ ¼ï¼Œ
            ç”µå½±çº§å…‰æ•ˆ
            """;

        // ç”Ÿæˆå¤šå¼ å›¾åƒ
        int numberOfImages = 2;
        List&lt;Response&lt;Image&gt;&gt; responses = imageModel.generate(prompt, numberOfImages);

        // å¤„ç†æ¯å¼ å›¾åƒ
        for (int i = 0; i &lt; responses.size(); i++) {
            Response&lt;Image&gt; response = responses.get(i);
            Image image = response.content();
            System.out.printf("å›¾åƒ %d: %s%n", i + 1,
                image.url() != null ? image.url() : "[Base64æ•°æ®]");
        }
    }
}</code></pre>
                </div>

                <div class="bg-red-50 border-l-4 border-red-500 p-5 rounded-r-lg">
                    <h4 class="font-semibold text-red-900 mb-2">âš ï¸ æˆæœ¬ä¸é™åˆ¶</h4>
                    <p class="text-red-800 text-sm">
                        å›¾åƒç”ŸæˆAPIé€šå¸¸æ¯”æ–‡æœ¬ç”ŸæˆAPIæ˜‚è´µã€‚DALL-E 3çš„é«˜æ¸…å›¾åƒï¼ˆ1024x1024ï¼‰æ¯æ¬¡è°ƒç”¨å¯èƒ½æˆæœ¬$0.04-$0.08ã€‚
                        å»ºè®®åœ¨å¼€å‘æ—¶ä½¿ç”¨å°å°ºå¯¸ï¼ˆ256x256ï¼‰è¿›è¡Œæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå†ä½¿ç”¨é«˜åˆ†è¾¨ç‡ã€‚
                        åŒæ—¶æ³¨æ„APIè°ƒç”¨é¢‘ç‡é™åˆ¶ï¼ˆRPMï¼‰ã€‚
                    </p>
                </div>
            </section>

            <!-- ç¬¬3èŠ‚ï¼šå›¾åƒç†è§£èƒ½åŠ› -->
            <section id="image-understanding" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600">3</span>
                    å›¾åƒç†è§£èƒ½åŠ›
                </h2>

                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">æ”¯æŒçš„è§†è§‰æ¨¡å‹</h3>
                    <p class="text-gray-700 mb-4">
                        LangChain4jæ”¯æŒå¤šç§å¤šæ¨¡æ€æ¨¡å‹ï¼Œå¯ä»¥ç†è§£å›¾åƒå†…å®¹å¹¶ç”Ÿæˆæ–‡æœ¬æè¿°ï¼š
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white rounded-lg p-4 shadow-sm">
                            <div class="font-semibold text-gray-900 mb-2">GPT-4 Vision</div>
                            <p class="text-sm text-gray-600">OpenAIçš„è§†è§‰æ¨¡å‹ï¼Œå¼ºå¤§çš„å›¾åƒç†è§£èƒ½åŠ›</p>
                        </div>
                        <div class="bg-white rounded-lg p-4 shadow-sm">
                            <div class="font-semibold text-gray-900 mb-2">Claude-3 Vision</div>
                            <p class="text-sm text-gray-600">Anthropicçš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œç»†èŠ‚åˆ†æå‡ºè‰²</p>
                        </div>
                        <div class="bg-white rounded-lg p-4 shadow-sm">
                            <div class="font-semibold text-gray-900 mb-2">Gemini Pro Vision</div>
                            <p class="text-sm text-gray-600">Googleçš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œæˆæœ¬æ•ˆç›Šé«˜</p>
                        </div>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">3.1 åŸºç¡€å›¾åƒåˆ†æ</h3>
                <p class="text-gray-700 mb-4">
                    ä½¿ç”¨ChatModelçš„ImageMessageå¯ä»¥å‘é€å›¾åƒç»™æ¨¡å‹è¿›è¡Œåˆ†æï¼š
                </p>

                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - å›¾åƒç†è§£</span>
                        <span class="text-xs text-gray-500">ImageUnderstandingExample.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.data.message.ImageContent;
import dev.langchain4j.data.message.UserMessage;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.model.output.Response;

/**
 * å›¾åƒç†è§£åŸºç¡€ç¤ºä¾‹
 * æ¼”ç¤ºå¦‚ä½•è®©AIåˆ†æå›¾åƒå†…å®¹
 */
public class ImageUnderstandingExample {

    public static void main(String[] args) {
        // 1. åˆ›å»ºæ”¯æŒè§†è§‰çš„èŠå¤©æ¨¡å‹
        ChatLanguageModel visionModel = OpenAiChatModel.builder()
                .apiKey("your-api-key")
                .modelName("gpt-4o")  // æˆ– "gpt-4-vision-preview"
                .build();

        // 2. åˆ›å»ºå›¾åƒå†…å®¹ï¼ˆå¯ä»¥æ˜¯URLæˆ–Base64ï¼‰
        Image image = Image.from("https://example.com/image.jpg");

        // 3. åˆ›å»ºåŒ…å«å›¾åƒçš„ç”¨æˆ·æ¶ˆæ¯
        UserMessage userMessage = UserMessage.from(
                ImageContent.from(image),
                "è¯·è¯¦ç»†æè¿°è¿™å¼ å›¾ç‰‡ä¸­çš„å†…å®¹"
        );

        // 4. å‘é€ç»™æ¨¡å‹
        Response&lt;AiMessage&gt; response = visionModel.generate(userMessage);

        // 5. è·å–åˆ†æç»“æœ
        System.out.println("AIåˆ†æç»“æœ:");
        System.out.println(response.content().text());
    }
}</code></pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">3.2 ä»æœ¬åœ°æ–‡ä»¶åŠ è½½å›¾åƒ</h3>
                <p class="text-gray-700 mb-4">
                    é™¤äº†URLï¼Œä½ ä¹Ÿå¯ä»¥ä»æœ¬åœ°æ–‡ä»¶åŠ è½½å›¾åƒï¼š
                </p>

                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - æœ¬åœ°å›¾åƒå¤„ç†</span>
                        <span class="text-xs text-gray-500">LocalImageExample.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.data.message.ImageContent;
import dev.langchain4j.data.message.UserMessage;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.Base64;

/**
 * ä»æœ¬åœ°æ–‡ä»¶åŠ è½½å›¾åƒç¤ºä¾‹
 */
public class LocalImageExample {

    public static void main(String[] args) throws IOException {
        ChatLanguageModel visionModel = OpenAiChatModel.builder()
                .apiKey("your-api-key")
                .modelName("gpt-4o")
                .build();

        // 1. è¯»å–æœ¬åœ°å›¾åƒæ–‡ä»¶
        Path imagePath = Paths.get("path/to/your/image.jpg");
        byte[] imageBytes = Files.readAllBytes(imagePath);

        // 2. è½¬æ¢ä¸ºBase64ç¼–ç 
        String base64Image = Base64.getEncoder()
                .encodeToString(imageBytes);

        // 3. åˆ›å»ºImageå¯¹è±¡ï¼ŒæŒ‡å®šMIMEç±»å‹
        String mimeType = Files.probeContentType(imagePath);
        Image image = Image.from("data:" + mimeType + ";base64," + base64Image);

        // 4. åˆ›å»ºç”¨æˆ·æ¶ˆæ¯
        UserMessage userMessage = UserMessage.from(
                ImageContent.from(image),
                "è¿™å¼ å›¾ç‰‡é‡Œæœ‰ä»€ä¹ˆï¼Ÿè¯·åˆ—å‡ºæ‰€æœ‰ä¸»è¦ç‰©ä½“"
        );

        // 5. å‘é€ç»™æ¨¡å‹åˆ†æ
        var response = visionModel.generate(userMessage);
        System.out.println(response.content().text());
    }
}</code></pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">3.3 æå–ç»“æ„åŒ–ä¿¡æ¯</h3>
                <p class="text-gray-700 mb-4">
                    å›¾åƒç†è§£ä¸ä»…å¯ä»¥æè¿°å†…å®¹ï¼Œè¿˜å¯ä»¥æå–ç»“æ„åŒ–æ•°æ®ï¼š
                </p>

                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - ç»“æ„åŒ–æ•°æ®æå–</span>
                        <span class="text-xs text-gray-500">StructuredExtraction.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.data.message.ImageContent;
import dev.langchain4j.data.message.UserMessage;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;

/**
 * ä»å›¾åƒæå–ç»“æ„åŒ–ä¿¡æ¯ç¤ºä¾‹
 */
public class StructuredExtraction {

    public static void main(String[] args) {
        ChatLanguageModel visionModel = OpenAiChatModel.builder()
                .apiKey("your-api-key")
                .modelName("gpt-4o")
                .build();

        Image image = Image.from("https://example.com/invoice.jpg");

        // æç¤ºè¯è¦æ±‚JSONæ ¼å¼çš„ç»“æ„åŒ–è¾“å‡º
        UserMessage userMessage = UserMessage.from(
                ImageContent.from(image),
                """
                è¯·åˆ†æè¿™å¼ å‘ç¥¨ï¼Œå¹¶ä»¥JSONæ ¼å¼è¿”å›ä»¥ä¸‹ä¿¡æ¯ï¼š
                {
                    "invoice_number": "å‘ç¥¨å·ç ",
                    "date": "æ—¥æœŸ",
                    "total_amount": "æ€»é‡‘é¢",
                    "vendor": "ä¾›åº”å•†åç§°",
                    "line_items": [
                        {"item": "å•†å“åç§°", "quantity": æ•°é‡, "price": ä»·æ ¼}
                    ]
                }

                åªè¿”å›JSONï¼Œä¸è¦å…¶ä»–æ–‡æœ¬ã€‚
                """
        );

        var response = visionModel.generate(userMessage);
        String result = response.content().text();

        // è¿™é‡Œå¯ä»¥ä½¿ç”¨OutputParserè§£æJSONï¼ˆå‚è€ƒoutput-parsersç« èŠ‚ï¼‰
        System.out.println("æå–çš„å‘ç¥¨ä¿¡æ¯:");
        System.out.println(result);
    }
}</code></pre>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-5">
                        <h4 class="font-semibold text-blue-900 mb-3">ğŸ’¡ å¸¸è§åº”ç”¨åœºæ™¯</h4>
                        <ul class="text-blue-800 space-y-2 text-sm">
                            <li>â€¢ OCRæ–‡æ¡£è¯†åˆ«ï¼ˆå‘ç¥¨ã€æ”¶æ®ã€èº«ä»½è¯ï¼‰</li>
                            <li>â€¢ äº§å“ç¼ºé™·æ£€æµ‹ï¼ˆåˆ¶é€ ä¸šè´¨æ£€ï¼‰</li>
                            <li>â€¢ åŒ»ç–—å½±åƒåˆ†æï¼ˆXå…‰ç‰‡ã€CTæ‰«æï¼‰</li>
                            <li>â€¢ å›¾åƒå†…å®¹å®¡æ ¸ï¼ˆè¯†åˆ«ä¸å½“å†…å®¹ï¼‰</li>
                            <li>â€¢ ç”µå•†å•†å“åˆ†ç±»ï¼ˆè‡ªåŠ¨æ ‡æ³¨ï¼‰</li>
                        </ul>
                    </div>
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-5">
                        <h4 class="font-semibold text-orange-900 mb-3">âš ï¸ æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
                        <ul class="text-orange-800 space-y-2 text-sm">
                            <li>â€¢ å‹ç¼©å›¾åƒåˆ†è¾¨ç‡ï¼ˆå‡å°‘Tokenæ¶ˆè€—ï¼‰</li>
                            <li>â€¢ è£å‰ªæ„Ÿå…´è¶£åŒºåŸŸï¼ˆé™ä½å¤æ‚åº¦ï¼‰</li>
                            <li>â€¢ ä½¿ç”¨å°æ¨¡å‹è¿›è¡Œåˆç­›ï¼ˆèŠ‚çœæˆæœ¬ï¼‰</li>
                            <li>â€¢ ç¼“å­˜å›¾åƒåµŒå…¥ï¼ˆé¿å…é‡å¤åˆ†æï¼‰</li>
                            <li>â€¢ æ‰¹é‡å¤„ç†è€Œéå•å¼ åˆ†æ</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ç¬¬4èŠ‚ï¼šå¤šæ¨¡æ€å¯¹è¯ -->
            <section id="chat-multimodal" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600">4</span>
                    å¤šæ¨¡æ€å¯¹è¯
                </h2>

                <div class="bg-gray-50 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">å¯¹è¯ä¸­çš„å¤šæ¨¡æ€æ”¯æŒ</h3>
                    <p class="text-gray-700 mb-4">
                        LangChain4jçš„ChatModelæ”¯æŒåœ¨å¯¹è¯ä¸­æ··åˆä½¿ç”¨æ–‡æœ¬å’Œå›¾åƒã€‚
                        ä½ å¯ä»¥ï¼š
                    </p>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start gap-2">
                            <span class="text-indigo-600 font-bold">1.</span>
                            <span>åœ¨UserMessageä¸­åŒæ—¶åŒ…å«æ–‡æœ¬å’ŒImageContent</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-indigo-600 font-bold">2.</span>
                            <span>åœ¨å¤šè½®å¯¹è¯ä¸­ä¿æŒä¸Šä¸‹æ–‡</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-indigo-600 font-bold">3.</span>
                            <span>è®©AIæ ¹æ®å›¾åƒå†…å®¹è¿›è¡Œæ¨ç†å’Œå›ç­”</span>
                        </li>
                    </ul>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">4.1 å¤šè½®å›¾åƒå¯¹è¯ç¤ºä¾‹</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - å¤šè½®å¤šæ¨¡æ€å¯¹è¯</span>
                        <span class="text-xs text-gray-500">MultimodalChat.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.data.message.*;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.model.openai.OpenAiChatModelName;

import java.util.ArrayList;
import java.util.List;

/**
 * å¤šæ¨¡æ€å¯¹è¯ç¤ºä¾‹
 * æ¼”ç¤ºå¦‚ä½•åœ¨å¯¹è¯ä¸­æ··åˆä½¿ç”¨æ–‡æœ¬å’Œå›¾åƒ
 */
public class MultimodalChat {

    public static void main(String[] args) {
        ChatLanguageModel model = OpenAiChatModel.builder()
                .apiKey("your-api-key")
                .modelName(OpenAiChatModelName.GPT_4O)
                .build();

        // ç¬¬ä¸€è½®ï¼šå‘é€å›¾ç‰‡
        System.out.println("=== ç¬¬ä¸€è½® ===");
        List&lt;ChatMessage&gt; messages1 = new ArrayList&lt;&gt;();
        Image chartImage = Image.from("https://example.com/sales-chart.jpg");

        messages1.add(UserMessage.from(
                ImageContent.from(chartImage),
                "è¯·åˆ†æè¿™å¼ é”€å”®å›¾è¡¨çš„ä¸»è¦è¶‹åŠ¿"
        ));

        Response&lt;AiMessage&gt; response1 = model.generate(messages1);
        System.out.println("AI: " + response1.content().text());
        messages1.add(response1.content());

        // ç¬¬äºŒè½®ï¼šè¿½é—®ç»†èŠ‚
        System.out.println("\n=== ç¬¬äºŒè½® ===");
        List&lt;ChatMessage&gt; messages2 = new ArrayList&lt;&gt;(messages1);
        messages2.add(UserMessage.from(
                "å›¾è¡¨ä¸­çš„ç¬¬3ä¸ªæœˆä»½çš„æ•°æ®æ˜¯å¤šå°‘ï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªå³°å€¼ï¼Ÿ"
        ));

        Response&lt;AiMessage&gt; response2 = model.generate(messages2);
        System.out.println("AI: " + response2.content().text());

        // ç¬¬ä¸‰è½®ï¼šä¸Šä¼ æ–°å›¾ç‰‡å¹¶å…³è”è®¨è®º
        System.out.println("\n=== ç¬¬ä¸‰è½® ===");
        List&lt;ChatMessage&gt; messages3 = new ArrayList&lt;&gt;(messages2);
        Image competitorChart = Image.from("https://example.com/competitor-chart.jpg");

        messages3.add(UserMessage.from(
                ImageContent.from(competitorChart),
                "å¯¹æ¯”è¿™ä¸¤å¼ å›¾è¡¨ï¼Œæˆ‘ä»¬çš„äº§å“æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"
        ));

        Response&lt;AiMessage&gt; response3 = model.generate(messages3);
        System.out.println("AI: " + response3.content().text());
    }
}</code></pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">4.2 AI Serviceä¸­çš„å¤šæ¨¡æ€</h3>
                <p class="text-gray-700 mb-4">
                    ä½¿ç”¨LangChain4jçš„AI Serviceé«˜çº§APIï¼Œå¯ä»¥æ›´ä¼˜é›…åœ°å¤„ç†å¤šæ¨¡æ€å¯¹è¯ï¼š
                </p>

                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - AI Serviceå¤šæ¨¡æ€</span>
                        <span class="text-xs text-gray-500">MultimodalService.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.data.message.ImageContent;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.memory.ChatMemoryProvider;
import dev.langchain4j.service.memory.MessageWindowChatMemory;
import dev.langchain4j.data.message.UserMessage;
import dev.langchain4j.data.message.AiMessage;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;

import static java.util.Collections.singletonList;

/**
 * ä½¿ç”¨AI Serviceå¤„ç†å¤šæ¨¡æ€å¯¹è¯
 */
public class MultimodalService {

    interface ImageAssistant {
        String analyzeImage(String imageDescription);
        String followUpQuestion(String question);
    }

    public static void main(String[] args) {
        // 1. åˆ›å»ºæ”¯æŒè§†è§‰çš„æ¨¡å‹
        ChatLanguageModel model = OpenAiChatModel.builder()
                .apiKey("your-api-key")
                .modelName("gpt-4o")
                .build();

        // 2. é…ç½®ChatMemoryä¿æŒå¯¹è¯å†å²
        MessageWindowChatMemory chatMemory = MessageWindowChatMemory.withMaxMessages(10);
        ChatMemoryProvider memoryProvider = (memoryId) -> chatMemory;

        // 3. åˆ›å»ºAI Service
        ImageAssistant assistant = AiServices.builder(ImageAssistant.class)
                .chatLanguageModel(model)
                .chatMemoryProvider(memoryProvider)
                .build();

        // 4. æ¨¡æ‹Ÿç”¨æˆ·ä¸Šä¼ å›¾ç‰‡
        String imageDescription = "ç”¨æˆ·ä¸Šä¼ äº†ä¸€å¼ åŒ…å«å¤šä¸ªäº§å“çš„ç…§ç‰‡";
        System.out.println("ç”¨æˆ·ï¼šä¸Šä¼ äº†ä¸€å¼ å›¾ç‰‡ - " + imageDescription);
        String response1 = assistant.analyzeImage(imageDescription);
        System.out.println("AIï¼š" + response1);

        // 5. åç»­é—®ç­”
        String question = "ç¬¬ä¸€ä¸ªäº§å“çš„ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ";
        System.out.println("ç”¨æˆ·ï¼š" + question);
        String response2 = assistant.followUpQuestion(question);
        System.out.println("AIï¼š" + response2);
    }
}</code></pre>
                </div>

                <div class="bg-green-50 border-l-4 border-green-500 p-5 rounded-r-lg">
                    <h4 class="font-semibold text-green-900 mb-2">âœ… æœ€ä½³å®è·µ</h4>
                    <ul class="text-green-800 space-y-1 text-sm">
                        <li><strong>æç¤ºè¯è®¾è®¡</strong>ï¼šæ˜ç¡®å‘Šè¯‰AIå›¾åƒçš„å†…å®¹å’Œä½ çš„ç›®æ ‡ï¼Œé¿å…æ­§ä¹‰</li>
                        <li><strong>å›¾åƒè´¨é‡</strong>ï¼šç¡®ä¿ä¸Šä¼ çš„å›¾åƒæ¸…æ™°åº¦è¶³å¤Ÿï¼Œå…³é”®ä¿¡æ¯å¯è§</li>
                        <li><strong>ä¸Šä¸‹æ–‡ä¿æŒ</strong>ï¼šåœ¨å¤šè½®å¯¹è¯ä¸­åˆç†ç®¡ç†ChatMemoryï¼Œé¿å…Tokenè¶…é™</li>
                        <li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå›¾åƒä¸Šä¼ å¯èƒ½å¤±è´¥ï¼Œè¦æœ‰ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶</li>
                    </ul>
                </div>
            </section>

            <!-- ç¬¬5èŠ‚ï¼šå¤šæ¨¡æ€RAGç³»ç»Ÿ -->
            <section id="multimodal-rag" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600">5</span>
                    å¤šæ¨¡æ€RAGç³»ç»Ÿ
                </h2>

                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">ä»€ä¹ˆæ˜¯å¤šæ¨¡æ€RAGï¼Ÿ</h3>
                    <p class="text-gray-700 mb-4">
                        ä¼ ç»ŸRAGç³»ç»Ÿä¸»è¦å¤„ç†æ–‡æœ¬æ•°æ®ï¼Œè€Œå¤šæ¨¡æ€RAGå¯ä»¥ï¼š
                    </p>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start gap-2">
                            <span class="text-blue-600 font-bold">â€¢</span>
                            <span><strong>æ£€ç´¢å›¾åƒ</strong>ï¼šæ ¹æ®æ–‡æœ¬æˆ–å›¾åƒæŸ¥è¯¢ç›¸ä¼¼çš„å›¾åƒ</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-blue-600 font-bold">â€¢</span>
                            <span><strong>è·¨æ¨¡æ€æ£€ç´¢</strong>ï¼šç”¨å›¾åƒæŸ¥è¯¢æ–‡æœ¬ï¼Œæˆ–ç”¨æ–‡æœ¬æŸ¥è¯¢å›¾åƒ</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-blue-600 font-bold">â€¢</span>
                            <span><strong>æ··åˆæ£€ç´¢</strong>ï¼šåŒæ—¶æ£€ç´¢æ–‡æœ¬å’Œå›¾åƒï¼Œç»¼åˆç”Ÿæˆå›ç­”</span>
                        </li>
                    </ul>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">5.1 å›¾åƒRAGæ¶æ„</h3>
                <p class="text-gray-700 mb-4">
                    ä»¥ä¸‹æ˜¯ä¸€ä¸ªå›¾åƒRAGç³»ç»Ÿçš„å…¸å‹æ¶æ„ï¼š
                </p>

                <div class="bg-gray-100 rounded-lg p-6 mb-6">
                    <div class="font-mono text-sm space-y-2">
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-1 bg-blue-600 text-white rounded text-xs">è¾“å…¥</span>
                            <span>ç”¨æˆ·æŸ¥è¯¢ï¼ˆæ–‡æœ¬æˆ–å›¾åƒï¼‰</span>
                        </div>
                        <div class="text-center text-gray-400">â†“</div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-1 bg-purple-600 text-white rounded text-xs">åµŒå…¥</span>
                            <span>ä½¿ç”¨å¤šæ¨¡æ€åµŒå…¥æ¨¡å‹è½¬æ¢ä¸ºå‘é‡</span>
                        </div>
                        <div class="text-center text-gray-400">â†“</div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-1 bg-green-600 text-white rounded text-xs">æ£€ç´¢</span>
                            <span>ä»å‘é‡æ•°æ®åº“æ£€ç´¢ç›¸ä¼¼çš„å›¾åƒ/æ–‡æœ¬</span>
                        </div>
                        <div class="text-center text-gray-400">â†“</div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-1 bg-orange-600 text-white rounded text-xs">ç”Ÿæˆ</span>
                            <span>å°†æ£€ç´¢ç»“æœè¾“å…¥LLMç”Ÿæˆå›ç­”</span>
                        </div>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">5.2 å›¾åƒRAGå®ç°ç¤ºä¾‹</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - å›¾åƒRAGç³»ç»Ÿ</span>
                        <span class="text-xs text-gray-500">ImageRagExample.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.data.message.*;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.rag.content.retriever.ContentRetriever;
import dev.langchain4j.rag.query.Query;

import java.util.List;

/**
 * å›¾åƒRAGç³»ç»Ÿç¤ºä¾‹
 * æ¼”ç¤ºå¦‚ä½•æ£€ç´¢ç›¸å…³å›¾åƒå¹¶ç”Ÿæˆå›ç­”
 */
public class ImageRagExample {

    // å‡è®¾çš„å›¾åƒæ£€ç´¢å™¨æ¥å£
    interface ImageRetriever extends ContentRetriever {
        List&lt;RetrievedImage&gt; retrieveByImage(Image queryImage);
        List&lt;RetrievedImage&gt; retrieveByText(String textQuery);
    }

    public static void main(String[] args) {
        // 1. åˆ›å»ºè§†è§‰æ¨¡å‹
        ChatLanguageModel visionModel = OpenAiChatModel.builder()
                .apiKey("your-api-key")
                .modelName("gpt-4o")
                .build();

        // 2. åˆ›å»ºå›¾åƒæ£€ç´¢å™¨ï¼ˆå®é™…é¡¹ç›®ä¸­éœ€è¦å®ç°æˆ–ä½¿ç”¨ç°æœ‰çš„ï¼‰
        ImageRetriever retriever = createImageRetriever();

        // 3. ç”¨æˆ·è¾“å…¥æ–‡æœ¬æŸ¥è¯¢
        String userQuery = "æˆ‘æƒ³æ‰¾ä¸€å¼ æœ‰è“å¤©ç™½äº‘çš„é£æ™¯ç…§";
        System.out.println("ç”¨æˆ·æŸ¥è¯¢: " + userQuery);

        // 4. æ£€ç´¢ç›¸å…³å›¾åƒ
        List&lt;RetrievedImage&gt; retrievedImages = retriever.retrieveByText(userQuery);
        System.out.println("æ£€ç´¢åˆ° " + retrievedImages.size() + " å¼ ç›¸å…³å›¾åƒ");

        // 5. æ„å»ºåŒ…å«æ£€ç´¢ç»“æœçš„Prompt
        StringBuilder contextBuilder = new StringBuilder();
        contextBuilder.append("ä»¥ä¸‹æ˜¯ä¸€äº›ç›¸å…³å›¾åƒçš„æè¿°ï¼š\n\n");

        for (int i = 0; i &lt; retrievedImages.size() &amp;&amp; i &lt; 3; i++) {
            RetrievedImage img = retrievedImages.get(i);
            contextBuilder.append(String.format(
                    "å›¾åƒ %d: %s (URL: %s)\n",
                    i + 1, img.description(), img.url()
            ));
        }

        contextBuilder.append("\nç”¨æˆ·é—®é¢˜: ").append(userQuery);

        // 6. ç”Ÿæˆå›ç­”
        List&lt;ChatMessage&gt; messages = List.of(
                UserMessage.from(contextBuilder.toString())
        );

        var response = visionModel.generate(messages);
        System.out.println("\nAIå›ç­”:");
        System.out.println(response.content().text());
    }

    private static ImageRetriever createImageRetriever() {
        // å®é™…å®ç°éœ€è¦ï¼š
        // 1. å›¾åƒåµŒå…¥æ¨¡å‹ï¼ˆå¦‚CLIPï¼‰
        // 2. å‘é‡æ•°æ®åº“ï¼ˆå¦‚Milvusã€Pineconeï¼‰
        // 3. ç›¸ä¼¼åº¦æœç´¢
        return new ImageRetriever() {
            @Override
            public List&lt;RetrievedImage&gt; retrieve(Query query) {
                // å®ç°æ£€ç´¢é€»è¾‘
                return List.of();
            }
            // ... å…¶ä»–æ–¹æ³•
        };
    }

    // å‡è®¾çš„æ£€ç´¢ç»“æœç±»
    static class RetrievedImage {
        private final String url;
        private final String description;
        private final double score;

        public RetrievedImage(String url, String description, double score) {
            this.url = url;
            this.description = description;
            this.score = score;
        }

        public String url() { return url; }
        public String description() { return description; }
        public double score() { return score; }
    }
}</code></pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">5.3 PDFå¤šæ¨¡æ€RAG</h3>
                <p class="text-gray-700 mb-4">
                    å¤„ç†åŒ…å«å›¾åƒçš„PDFæ˜¯å¤šæ¨¡æ€RAGçš„å…¸å‹åº”ç”¨åœºæ™¯ï¼š
                </p>

                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - PDFå¤šæ¨¡æ€å¤„ç†</span>
                        <span class="text-xs text-gray-500">PdfMultimodalRag.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.data.message.*;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;

import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.rendering.PDFRenderer;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

/**
 * PDFå¤šæ¨¡æ€RAGç¤ºä¾‹
 * æå–PDFä¸­çš„æ–‡æœ¬å’Œå›¾åƒï¼Œè¿›è¡Œæ··åˆæ£€ç´¢
 */
public class PdfMultimodalRag {

    public static void main(String[] args) throws IOException {
        String pdfPath = "document.pdf";
        ChatLanguageModel visionModel = OpenAiChatModel.builder()
                .apiKey("your-api-key")
                .modelName("gpt-4o")
                .build();

        // 1. æå–PDFå†…å®¹
        PdfContent content = extractPdfContent(pdfPath);

        // 2. ç”¨æˆ·æŸ¥è¯¢
        String query = "è¿™ä¸ªæ–‡æ¡£ä¸­æåˆ°äº†å“ªäº›å…³é”®æ¦‚å¿µï¼Ÿ";

        // 3. æ£€ç´¢ç›¸å…³å†…å®¹ï¼ˆæ–‡æœ¬+å›¾åƒï¼‰
        List&lt;RelevantContent&gt; relevant = retrieveRelevantContent(content, query);

        // 4. æ„å»ºContext
        StringBuilder context = new StringBuilder();
        context.append("ç›¸å…³æ–‡æœ¬ç‰‡æ®µ:\n");
        for (RelevantContent.TextSegment ts : relevant.textSegments()) {
            context.append("- ").append(ts.text()).append("\n");
        }

        context.append("\nç›¸å…³å›¾åƒ:\n");
        for (RelevantContent.ImageSegment is : relevant.imageSegments()) {
            context.append("- ").append(is.description()).append("\n");
        }

        // 5. ç”Ÿæˆå›ç­”
        String prompt = """
            ä»¥ä¸‹æ˜¯ä»PDFæ–‡æ¡£ä¸­æ£€ç´¢åˆ°çš„ç›¸å…³å†…å®¹ï¼š

            %s

            åŸºäºè¿™äº›å†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ï¼š%s
            """.formatted(context.toString(), query);

        List&lt;ChatMessage&gt; messages = List.of(UserMessage.from(prompt));
        var response = visionModel.generate(messages);

        System.out.println("å›ç­”: " + response.content().text());
    }

    /**
     * æå–PDFä¸­çš„æ–‡æœ¬å’Œå›¾åƒ
     */
    private static PdfContent extractPdfContent(String pdfPath) throws IOException {
        PdfContent content = new PdfContent();

        try (PDDocument document = PDDocument.load(new File(pdfPath))) {
            PDFRenderer renderer = new PDFRenderer(document);

            // æå–æ–‡æœ¬ï¼ˆä½¿ç”¨PDFBoxæˆ–Tikaï¼‰
            // content.addText(...);

            // æå–å›¾åƒ
            for (int pageNum = 0; pageNum &lt; document.getNumberOfPages(); pageNum++) {
                BufferedImage image = renderer.renderImageWithDPI(pageNum, 150);
                // ä¿å­˜å›¾åƒæˆ–è½¬æ¢ä¸ºBase64
                // content.addImage(...);
            }
        }

        return content;
    }

    // å‡è®¾çš„æ•°æ®ç±»
    static class PdfContent {
        private final List&lt;String&gt; textSegments = new ArrayList&lt;&gt;();
        private final List&lt;ImageInfo&gt; images = new ArrayList&lt;&gt;();

        public void addText(String text) { textSegments.add(text); }
        public void addImage(ImageInfo image) { images.add(image); }
        public List&lt;String&gt; getTextSegments() { return textSegments; }
        public List&lt;ImageInfo&gt; getImages() { return images; }
    }

    static class ImageInfo {
        private final Image image;
        private final int pageNumber;

        public ImageInfo(Image image, int pageNumber) {
            this.image = image;
            this.pageNumber = pageNumber;
        }
    }
}</code></pre>
                </div>

                <div class="bg-indigo-50 border-l-4 border-indigo-500 p-5 rounded-r-lg mb-6">
                    <h4 class="font-semibold text-indigo-900 mb-2">ğŸ’¡ å¤šæ¨¡æ€RAGä¼˜åŠ¿</h4>
                    <ul class="text-indigo-800 space-y-1 text-sm">
                        <li><strong>æ›´ä¸°å¯Œçš„æ£€ç´¢</strong>ï¼šä¸ä»…æ£€ç´¢æ–‡æœ¬ï¼Œè¿˜èƒ½æ£€ç´¢å›¾åƒã€è¡¨æ ¼ç­‰</li>
                        <li><strong>æ›´å¥½çš„ç†è§£</strong>ï¼šè§†è§‰ä¿¡æ¯èƒ½æä¾›æ–‡æœ¬æ— æ³•è¡¨è¾¾çš„ä¸Šä¸‹æ–‡</li>
                        <li><strong>è·¨æ¨¡æ€æŸ¥è¯¢</strong>ï¼šå¯ä»¥ç”¨å›¾åƒæ‰¾å›¾åƒï¼Œæˆ–æ–‡æœ¬æ‰¾å›¾åƒ</li>
                        <li><strong>æå‡å‡†ç¡®ç‡</strong>ï¼šå¤šæºä¿¡æ¯èåˆï¼Œå‡å°‘å¹»è§‰</li>
                    </ul>
                </div>

                <div class="bg-red-50 border-l-4 border-red-500 p-5 rounded-r-lg">
                    <h4 class="font-semibold text-red-900 mb-2">âš ï¸ æŠ€æœ¯æŒ‘æˆ˜</h4>
                    <ul class="text-red-800 space-y-1 text-sm">
                        <li><strong>å¤šæ¨¡æ€åµŒå…¥</strong>ï¼šéœ€è¦èƒ½å¤„ç†å›¾åƒ+æ–‡æœ¬çš„åµŒå…¥æ¨¡å‹ï¼ˆå¦‚CLIPï¼‰</li>
                        <li><strong>å­˜å‚¨æˆæœ¬</strong>ï¼šå›¾åƒåµŒå…¥å‘é‡æ¯”æ–‡æœ¬å¤§å¾—å¤š</li>
                        <li><strong>æ£€ç´¢é€Ÿåº¦</strong>ï¼šå¤§è§„æ¨¡å›¾åƒå‘é‡æ£€ç´¢æ€§èƒ½ä¼˜åŒ–</li>
                        <li><strong>Contextçª—å£</strong>ï¼šå¤šå¼ å›¾åƒ+æ–‡æœ¬å¯èƒ½è¶…è¿‡LLMçš„Tokené™åˆ¶</li>
                    </ul>
                </div>
            </section>

            <!-- ç¬¬6èŠ‚ï¼šæœ€ä½³å®è·µä¸ä¼˜åŒ– -->
            <section id="best-practices" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                    <span class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600">6</span>
                    æœ€ä½³å®è·µä¸ä¼˜åŒ–
                </h2>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">6.1 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="border border-gray-200 rounded-lg p-5">
                        <h4 class="font-semibold text-gray-900 mb-3">ğŸš€ å›¾åƒå¤„ç†ä¼˜åŒ–</h4>
                        <ul class="space-y-2 text-gray-700 text-sm">
                            <li><strong>åˆ†è¾¨ç‡æ§åˆ¶</strong>ï¼šæœ€å¤§è¾¹é•¿ä¸è¶…è¿‡2048åƒç´ </li>
                            <li><strong>æ ¼å¼é€‰æ‹©</strong>ï¼šä½¿ç”¨WebPè€ŒéPNGï¼Œå‡å°‘å¤§å°</li>
                            <li><strong>æ‡’åŠ è½½</strong>ï¼šåªåœ¨éœ€è¦æ—¶åŠ è½½é«˜åˆ†è¾¨ç‡å›¾åƒ</li>
                            <li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šç¼“å­˜åˆ†æç»“æœï¼Œé¿å…é‡å¤è°ƒç”¨</li>
                        </ul>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-5">
                        <h4 class="font-semibold text-gray-900 mb-3">ğŸ’° æˆæœ¬ä¼˜åŒ–</h4>
                        <ul class="space-y-2 text-gray-700 text-sm">
                            <li><strong>æ¨¡å‹é€‰æ‹©</strong>ï¼šGPT-4o-miniæ¯”GPT-4oä¾¿å®œ60%</li>
                            <li><strong>æ‰¹é‡å¤„ç†</strong>ï¼šä¸€æ¬¡å¤„ç†å¤šå¼ å›¾è€Œéå•å¼ </li>
                            <li><strong>é¢„ç­›é€‰</strong>ï¼šç”¨ä½æˆæœ¬æ¨¡å‹å…ˆè¿‡æ»¤</li>
                            <li><strong>Tokené¢„ç®—</strong>ï¼šè®¾ç½®maxTokensé¿å…è¶…æ”¯</li>
                        </ul>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">6.2 å¸¸è§é”™è¯¯å¤„ç†</h3>
                <div class="bg-gray-900 rounded-lg p-5 mb-6 overflow-x-auto">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xs font-mono text-gray-400 uppercase">Java - é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</span>
                        <span class="text-xs text-gray-500">ErrorHandling.java</span>
                    </div>
                    <pre class="text-gray-100 text-sm font-mono"><code>import dev.langchain4j.data.image.Image;
import dev.langchain4j.data.message.ImageContent;
import dev.langchain4j.data.message.UserMessage;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.model.openai.OpenAiChatModelName;
import dev.langchain4j.model.output.Response;

/**
 * å¤šæ¨¡æ€åº”ç”¨çš„é”™è¯¯å¤„ç†æœ€ä½³å®è·µ
 */
public class ErrorHandling {

    private static final int MAX_RETRIES = 3;
    private static final long RETRY_DELAY_MS = 1000;

    public static void main(String[] args) {
        ChatLanguageModel model = OpenAiChatModel.builder()
                .apiKey("your-api-key")
                .modelName(OpenAiChatModelName.GPT_4O)
                .timeout(Duration.ofSeconds(30))  // è®¾ç½®è¶…æ—¶
                .maxRetries(2)                   // è‡ªåŠ¨é‡è¯•æ¬¡æ•°
                .build();

        String imageUrl = "https://example.com/image.jpg";

        // 1. å¸¦é‡è¯•çš„å›¾åƒåˆ†æ
        String result = analyzeImageWithRetry(model, imageUrl);
        if (result != null) {
            System.out.println("åˆ†ææˆåŠŸ: " + result);
        } else {
            System.err.println("å›¾åƒåˆ†æå¤±è´¥ï¼Œè¯·æ£€æŸ¥å›¾åƒURLæˆ–ç¨åé‡è¯•");
        }

        // 2. éªŒè¯å›¾åƒURL
        if (!isValidImageUrl(imageUrl)) {
            System.err.println("æ— æ•ˆçš„å›¾åƒURL: " + imageUrl);
            return;
        }

        // 3. å¤„ç†å¤§å›¾åƒï¼ˆå¯èƒ½å¯¼è‡´è¶…é™ï¼‰
        Image largeImage = loadAndResizeImage(imageUrl);
        if (largeImage == null) {
            System.err.println("å›¾åƒåŠ è½½å¤±è´¥");
            return;
        }
    }

    /**
     * å¸¦é‡è¯•æœºåˆ¶çš„å›¾åƒåˆ†æ
     */
    private static String analyzeImageWithRetry(
            ChatLanguageModel model,
            String imageUrl
    ) {
        int attempt = 0;
        Exception lastException = null;

        while (attempt &lt; MAX_RETRIES) {
            try {
                Image image = Image.from(imageUrl);
                UserMessage message = UserMessage.from(
                        ImageContent.from(image),
                        "è¯·æè¿°è¿™å¼ å›¾ç‰‡"
                );

                Response&lt;AiMessage&gt; response = model.generate(message);
                return response.content().text();

            } catch (Exception e) {
                lastException = e;
                attempt++;

                // æŒ‡æ•°é€€é¿
                if (attempt &lt; MAX_RETRIES) {
                    try {
                        Thread.sleep(RETRY_DELAY_MS * (1L &lt;&lt; attempt));
                    } catch (InterruptedException ie) {
                        Thread.currentThread().interrupt();
                        return null;
                    }
                }
            }
        }

        // è®°å½•å¤±è´¥åŸå› 
        System.err.println("å›¾åƒåˆ†æå¤±è´¥: " + lastException.getMessage());

        // åˆ¤æ–­é”™è¯¯ç±»å‹
        if (lastException.getMessage().contains("429")) {
            System.err.println("APIé€Ÿç‡é™åˆ¶ï¼Œè¯·ç¨åé‡è¯•");
        } else if (lastException.getMessage().contains("400")) {
            System.err.println("å›¾åƒæ ¼å¼ä¸æ”¯æŒæˆ–æŸå");
        } else if (lastException.getMessage().contains("timeout")) {
            System.err.println("è¯·æ±‚è¶…æ—¶ï¼Œå›¾åƒå¯èƒ½è¿‡å¤§");
        }

        return null;
    }

    /**
     * éªŒè¯å›¾åƒURL
     */
    private static boolean isValidImageUrl(String url) {
        if (url == null || url.trim().isEmpty()) {
            return false;
        }

        // æ£€æŸ¥URLæ ¼å¼
        return url.matches("https?://.+\\.(jpg|jpeg|png|gif|webp).*");
    }

    /**
     * åŠ è½½å¹¶è°ƒæ•´å›¾åƒå¤§å°ï¼ˆä¼ªä»£ç ï¼‰
     */
    private static Image loadAndResizeImage(String url) {
        try {
            // å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ImageIOæˆ–å…¶ä»–åº“
            // 1. ä¸‹è½½å›¾åƒ
            // 2. æ£€æŸ¥å°ºå¯¸
            // 3. å¦‚æœè¶…è¿‡2048x2048ï¼Œç­‰æ¯”ç¼©æ”¾
            // 4. è¿”å›è°ƒæ•´åçš„å›¾åƒ
            return Image.from(url);
        } catch (Exception e) {
            System.err.println("å›¾åƒå¤„ç†å¤±è´¥: " + e.getMessage());
            return null;
        }
    }
}</code></pre>
                </div>

                <h3 class="text-2xl font-semibold text-gray-900 mb-4">6.3 å®‰å…¨ä¸åˆè§„</h3>
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-5 mb-6">
                    <h4 class="font-semibold text-yellow-900 mb-3">âš ï¸ å¤šæ¨¡æ€å®‰å…¨æ³¨æ„äº‹é¡¹</h4>
                    <ul class="text-yellow-800 space-y-2 text-sm">
                        <li><strong>å†…å®¹è¿‡æ»¤</strong>ï¼šä½¿ç”¨OpenAIçš„Moderation APIè¿‡æ»¤ä¸å½“å†…å®¹</li>
                        <li><strong>éšç§ä¿æŠ¤</strong>ï¼šä¸è¦ä¸Šä¼ åŒ…å«PIIï¼ˆä¸ªäººèº«ä»½ä¿¡æ¯ï¼‰çš„å›¾åƒ</li>
                        <li><strong>æ°´å°æ£€æµ‹</strong>ï¼šè¯†åˆ«å¹¶å¤„ç†å¸¦æ°´å°çš„å›¾åƒ</li>
                        <li><strong>ç‰ˆæƒåˆè§„</strong>ï¼šç¡®ä¿æœ‰æƒåˆ©ä¸Šä¼ å’Œåˆ†æå›¾åƒ</li>
                        <li><strong>æ•°æ®æœ¬åœ°åŒ–</strong>ï¼šæ•æ„Ÿæ•°æ®ç¡®ä¿å­˜å‚¨åœ¨åˆè§„åŒºåŸŸ</li>
                    </ul>
                </div>

                <!-- æ€»ç»“éƒ¨åˆ† -->
                <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg p-8 text-white">
                    <h3 class="text-2xl font-bold mb-4">ğŸ¯ æœ¬ç« æ€»ç»“</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold mb-2">æ ¸å¿ƒæ¦‚å¿µ</h4>
                            <ul class="space-y-1 text-sm opacity-90">
                                <li>â€¢ å¤šæ¨¡æ€AIæ”¯æŒæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§æ•°æ®</li>
                                <li>â€¢ å›¾åƒç”Ÿæˆä½¿ç”¨ImageModelï¼ˆDALL-Eã€Imagenï¼‰</li>
                                <li>â€¢ å›¾åƒç†è§£ä½¿ç”¨ChatModelï¼ˆGPT-4Vã€Claude-3ï¼‰</li>
                                <li>â€¢ å¤šæ¨¡æ€RAGæ”¯æŒå›¾åƒæ£€ç´¢å’Œè·¨æ¨¡æ€æŸ¥è¯¢</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">å…³é”®API</h4>
                            <ul class="space-y-1 text-sm font-mono opacity-90">
                                <li>â€¢ ImageModel.generate()</li>
                                <li>â€¢ UserMessage.from(ImageContent, text)</li>
                                <li>â€¢ Image.from(url/base64)</li>
                                <li>â€¢ ContentRetrieverï¼ˆè‡ªå®šä¹‰æ£€ç´¢å™¨ï¼‰</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-6 pt-6 border-t border-white/20">
                        <p class="text-sm opacity-90">
                            ä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•æ„å»ºå®Œæ•´çš„RAGçŸ¥è¯†åº“ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ–‡æ¡£åŠ è½½ã€åµŒå…¥ç”Ÿæˆã€å‘é‡å­˜å‚¨å’Œæ™ºèƒ½æ£€ç´¢ã€‚
                        </p>
                        <a href="rag-complete.html" class="inline-block mt-3 px-6 py-2 bg-white text-indigo-600 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                            ç»§ç»­å­¦ä¹  â†’
                        </a>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>
</html>